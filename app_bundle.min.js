!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}e((function(t){var e=function(t){var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n,r){var i=e&&e.prototype instanceof l?e:l,o=Object.create(i.prototype),a=new x(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return E()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var c={};function l(){}function f(){}function h(){}var d={};d[i]=function(){return this};var p=Object.getPrototypeOf,g=p&&p(p(S([])));g&&g!==e&&n.call(g,i)&&(d=g);var v=h.prototype=l.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function y(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var c=u(t[i],t,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=v.constructor=h,h.constructor=f,h[a]=f.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(y.prototype),y.prototype[o]=function(){return this},t.AsyncIterator=y,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new y(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(v),v[a]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function n(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function r(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,u,"next",t)}function u(t){n(a,i,o,s,u,"throw",t)}s(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function h(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=d(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}var v=function(t){return t&&t.Math==Math&&t},m=v("object"==typeof globalThis&&globalThis)||v("object"==typeof window&&window)||v("object"==typeof self&&self)||v("object"==typeof t&&t)||Function("return this")(),y=function(t){try{return!!t()}catch(t){return!0}},b=!y((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),w={}.propertyIsEnumerable,k=Object.getOwnPropertyDescriptor,x={f:k&&!w.call({1:2},1)?function(t){var e=k(this,t);return!!e&&e.enumerable}:w},S=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},E={}.toString,L=function(t){return E.call(t).slice(8,-1)},O="".split,R=y((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==L(t)?O.call(t,""):Object(t)}:Object,_=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},T=function(t){return R(_(t))},C=function(t){return"object"==typeof t?null!==t:"function"==typeof t},A=function(t,e){if(!C(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!C(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!C(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!C(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},P={}.hasOwnProperty,I=function(t,e){return P.call(t,e)},D=m.document,j=C(D)&&C(D.createElement),M=function(t){return j?D.createElement(t):{}},B=!b&&!y((function(){return 7!=Object.defineProperty(M("div"),"a",{get:function(){return 7}}).a})),F=Object.getOwnPropertyDescriptor,U={f:b?F:function(t,e){if(t=T(t),e=A(e,!0),B)try{return F(t,e)}catch(t){}if(I(t,e))return S(!x.f.call(t,e),t[e])}},N=function(t){if(!C(t))throw TypeError(String(t)+" is not an object");return t},H=Object.defineProperty,G={f:b?H:function(t,e,n){if(N(t),e=A(e,!0),N(n),B)try{return H(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},V=b?function(t,e,n){return G.f(t,e,S(1,n))}:function(t,e,n){return t[e]=n,t},q=function(t,e){try{V(m,t,e)}catch(n){m[t]=e}return e},K=m["__core-js_shared__"]||q("__core-js_shared__",{}),W=Function.toString;"function"!=typeof K.inspectSource&&(K.inspectSource=function(t){return W.call(t)});var z,J,X,Y=K.inspectSource,Q=m.WeakMap,Z="function"==typeof Q&&/native code/.test(Y(Q)),tt=e((function(t){(t.exports=function(t,e){return K[t]||(K[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),et=0,nt=Math.random(),rt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++et+nt).toString(36)},it=tt("keys"),ot=function(t){return it[t]||(it[t]=rt(t))},at={},st=m.WeakMap;if(Z){var ut=new st,ct=ut.get,lt=ut.has,ft=ut.set;z=function(t,e){return ft.call(ut,t,e),e},J=function(t){return ct.call(ut,t)||{}},X=function(t){return lt.call(ut,t)}}else{var ht=ot("state");at[ht]=!0,z=function(t,e){return V(t,ht,e),e},J=function(t){return I(t,ht)?t[ht]:{}},X=function(t){return I(t,ht)}}var dt={set:z,get:J,has:X,enforce:function(t){return X(t)?J(t):z(t,{})},getterFor:function(t){return function(e){var n;if(!C(e)||(n=J(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},pt=e((function(t){var e=dt.get,n=dt.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||I(i,"name")||V(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==m?(a?!u&&t[e]&&(s=!0):delete t[e],s?t[e]=i:V(t,e,i)):s?t[e]=i:q(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||Y(this)}))})),gt=m,vt=function(t){return"function"==typeof t?t:void 0},mt=function(t,e){return arguments.length<2?vt(gt[t])||vt(m[t]):gt[t]&&gt[t][e]||m[t]&&m[t][e]},yt=Math.ceil,bt=Math.floor,wt=function(t){return isNaN(t=+t)?0:(t>0?bt:yt)(t)},kt=Math.min,xt=function(t){return t>0?kt(wt(t),9007199254740991):0},St=Math.max,Et=Math.min,Lt=function(t,e){var n=wt(t);return n<0?St(n+e,0):Et(n,e)},Ot=function(t){return function(e,n,r){var i,o=T(e),a=xt(o.length),s=Lt(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},Rt={includes:Ot(!0),indexOf:Ot(!1)},_t=Rt.indexOf,$t=function(t,e){var n,r=T(t),i=0,o=[];for(n in r)!I(at,n)&&I(r,n)&&o.push(n);for(;e.length>i;)I(r,n=e[i++])&&(~_t(o,n)||o.push(n));return o},Tt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ct=Tt.concat("length","prototype"),At={f:Object.getOwnPropertyNames||function(t){return $t(t,Ct)}},Pt={f:Object.getOwnPropertySymbols},It=mt("Reflect","ownKeys")||function(t){var e=At.f(N(t)),n=Pt.f;return n?e.concat(n(t)):e},Dt=function(t,e){for(var n=It(e),r=G.f,i=U.f,o=0;o<n.length;o++){var a=n[o];I(t,a)||r(t,a,i(e,a))}},jt=/#|\.prototype\./,Mt=function(t,e){var n=Ft[Bt(t)];return n==Nt||n!=Ut&&("function"==typeof e?y(e):!!e)},Bt=Mt.normalize=function(t){return String(t).replace(jt,".").toLowerCase()},Ft=Mt.data={},Ut=Mt.NATIVE="N",Nt=Mt.POLYFILL="P",Ht=Mt,Gt=U.f,Vt=function(t,e){var n,r,i,o,a,s=t.target,u=t.global,c=t.stat;if(n=u?m:c?m[s]||q(s,{}):(m[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=Gt(n,r))&&a.value:n[r],!Ht(u?r:s+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Dt(o,i)}(t.sham||i&&i.sham)&&V(o,"sham",!0),pt(n,r,o,t)}},qt=function(t,e){var n=[][t];return!!n&&y((function(){n.call(null,e||function(){throw 1},1)}))},Kt=[].join,Wt=R!=Object,zt=qt("join",",");Vt({target:"Array",proto:!0,forced:Wt||!zt},{join:function(t){return Kt.call(T(this),void 0===t?",":t)}});var Jt=!!Object.getOwnPropertySymbols&&!y((function(){return!String(Symbol())})),Xt=Jt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Yt=tt("wks"),Qt=m.Symbol,Zt=Xt?Qt:Qt&&Qt.withoutSetter||rt,te=function(t){return I(Yt,t)||(Jt&&I(Qt,t)?Yt[t]=Qt[t]:Yt[t]=Zt("Symbol."+t)),Yt[t]},ee={};ee[te("toStringTag")]="z";var ne="[object z]"===String(ee),re=te("toStringTag"),ie="Arguments"==L(function(){return arguments}()),oe=ne?L:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),re))?n:ie?L(e):"Object"==(r=L(e))&&"function"==typeof e.callee?"Arguments":r},ae=ne?{}.toString:function(){return"[object "+oe(this)+"]"};ne||pt(Object.prototype,"toString",ae,{unsafe:!0});var se=m.Promise,ue=function(t,e,n){for(var r in e)pt(t,r,e[r],n);return t},ce=G.f,le=te("toStringTag"),fe=function(t,e,n){t&&!I(t=n?t:t.prototype,le)&&ce(t,le,{configurable:!0,value:e})},he=te("species"),de=function(t){var e=mt(t),n=G.f;b&&e&&!e[he]&&n(e,he,{configurable:!0,get:function(){return this}})},pe=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},ge=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},ve={},me=te("iterator"),ye=Array.prototype,be=function(t){return void 0!==t&&(ve.Array===t||ye[me]===t)},we=function(t,e,n){if(pe(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},ke=te("iterator"),xe=function(t){if(null!=t)return t[ke]||t["@@iterator"]||ve[oe(t)]},Se=function(t,e,n,r){try{return r?e(N(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&N(i.call(t)),e}},Ee=e((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,i,o){var a,s,u,c,l,f,h,d=we(n,r,i?2:1);if(o)a=t;else{if("function"!=typeof(s=xe(t)))throw TypeError("Target is not iterable");if(be(s)){for(u=0,c=xt(t.length);c>u;u++)if((l=i?d(N(h=t[u])[0],h[1]):d(t[u]))&&l instanceof e)return l;return new e(!1)}a=s.call(t)}for(f=a.next;!(h=f.call(a)).done;)if("object"==typeof(l=Se(a,d,h.value,i))&&l&&l instanceof e)return l;return new e(!1)}).stop=function(t){return new e(!0,t)}})),Le=te("iterator"),Oe=!1;try{var Re=0,_e={next:function(){return{done:!!Re++}},return:function(){Oe=!0}};_e[Le]=function(){return this},Array.from(_e,(function(){throw 2}))}catch(t){}var $e,Te,Ce,Ae=function(t,e){if(!e&&!Oe)return!1;var n=!1;try{var r={};r[Le]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Pe=te("species"),Ie=function(t,e){var n,r=N(t).constructor;return void 0===r||null==(n=N(r)[Pe])?e:pe(n)},De=mt("document","documentElement"),je=mt("navigator","userAgent")||"",Me=/(iphone|ipod|ipad).*applewebkit/i.test(je),Be=m.location,Fe=m.setImmediate,Ue=m.clearImmediate,Ne=m.process,He=m.MessageChannel,Ge=m.Dispatch,Ve=0,qe={},Ke=function(t){if(qe.hasOwnProperty(t)){var e=qe[t];delete qe[t],e()}},We=function(t){return function(){Ke(t)}},ze=function(t){Ke(t.data)},Je=function(t){m.postMessage(t+"",Be.protocol+"//"+Be.host)};Fe&&Ue||(Fe=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return qe[++Ve]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},$e(Ve),Ve},Ue=function(t){delete qe[t]},"process"==L(Ne)?$e=function(t){Ne.nextTick(We(t))}:Ge&&Ge.now?$e=function(t){Ge.now(We(t))}:He&&!Me?(Ce=(Te=new He).port2,Te.port1.onmessage=ze,$e=we(Ce.postMessage,Ce,1)):!m.addEventListener||"function"!=typeof postMessage||m.importScripts||y(Je)?$e="onreadystatechange"in M("script")?function(t){De.appendChild(M("script")).onreadystatechange=function(){De.removeChild(this),Ke(t)}}:function(t){setTimeout(We(t),0)}:($e=Je,m.addEventListener("message",ze,!1)));var Xe,Ye,Qe,Ze,tn,en,nn,rn,on={set:Fe,clear:Ue},an=U.f,sn=on.set,un=m.MutationObserver||m.WebKitMutationObserver,cn=m.process,ln=m.Promise,fn="process"==L(cn),hn=an(m,"queueMicrotask"),dn=hn&&hn.value;dn||(Xe=function(){var t,e;for(fn&&(t=cn.domain)&&t.exit();Ye;){e=Ye.fn,Ye=Ye.next;try{e()}catch(t){throw Ye?Ze():Qe=void 0,t}}Qe=void 0,t&&t.enter()},fn?Ze=function(){cn.nextTick(Xe)}:un&&!Me?(tn=!0,en=document.createTextNode(""),new un(Xe).observe(en,{characterData:!0}),Ze=function(){en.data=tn=!tn}):ln&&ln.resolve?(nn=ln.resolve(void 0),rn=nn.then,Ze=function(){rn.call(nn,Xe)}):Ze=function(){sn.call(m,Xe)});var pn,gn,vn=dn||function(t){var e={fn:t,next:void 0};Qe&&(Qe.next=e),Ye||(Ye=e,Ze()),Qe=e},mn=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=pe(e),this.reject=pe(n)},yn={f:function(t){return new mn(t)}},bn=function(t,e){if(N(t),C(e)&&e.constructor===t)return e;var n=yn.f(t);return(0,n.resolve)(e),n.promise},wn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},kn=m.process,xn=kn&&kn.versions,Sn=xn&&xn.v8;Sn?gn=(pn=Sn.split("."))[0]+pn[1]:je&&(!(pn=je.match(/Edge\/(\d+)/))||pn[1]>=74)&&(pn=je.match(/Chrome\/(\d+)/))&&(gn=pn[1]);var En,Ln,On,Rn,_n=gn&&+gn,$n=on.set,Tn=te("species"),Cn="Promise",An=dt.get,Pn=dt.set,In=dt.getterFor(Cn),Dn=se,jn=m.TypeError,Mn=m.document,Bn=m.process,Fn=mt("fetch"),Un=yn.f,Nn=Un,Hn="process"==L(Bn),Gn=!!(Mn&&Mn.createEvent&&m.dispatchEvent),Vn=Ht(Cn,(function(){if(!(Y(Dn)!==String(Dn))){if(66===_n)return!0;if(!Hn&&"function"!=typeof PromiseRejectionEvent)return!0}if(_n>=51&&/native code/.test(Dn))return!1;var t=Dn.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Tn]=e,!(t.then((function(){}))instanceof e)})),qn=Vn||!Ae((function(t){Dn.all(t).catch((function(){}))})),Kn=function(t){var e;return!(!C(t)||"function"!=typeof(e=t.then))&&e},Wn=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;vn((function(){for(var i=e.value,o=1==e.state,a=0;r.length>a;){var s,u,c,l=r[a++],f=o?l.ok:l.fail,h=l.resolve,d=l.reject,p=l.domain;try{f?(o||(2===e.rejection&&Yn(t,e),e.rejection=1),!0===f?s=i:(p&&p.enter(),s=f(i),p&&(p.exit(),c=!0)),s===l.promise?d(jn("Promise-chain cycle")):(u=Kn(s))?u.call(s,h,d):h(s)):d(i)}catch(t){p&&!c&&p.exit(),d(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&Jn(t,e)}))}},zn=function(t,e,n){var r,i;Gn?((r=Mn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),m.dispatchEvent(r)):r={promise:e,reason:n},(i=m["on"+t])?i(r):"unhandledrejection"===t&&function(t,e){var n=m.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Jn=function(t,e){$n.call(m,(function(){var n,r=e.value;if(Xn(e)&&(n=wn((function(){Hn?Bn.emit("unhandledRejection",r,t):zn("unhandledrejection",t,r)})),e.rejection=Hn||Xn(e)?2:1,n.error))throw n.value}))},Xn=function(t){return 1!==t.rejection&&!t.parent},Yn=function(t,e){$n.call(m,(function(){Hn?Bn.emit("rejectionHandled",t):zn("rejectionhandled",t,e.value)}))},Qn=function(t,e,n,r){return function(i){t(e,n,i,r)}},Zn=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Wn(t,e,!0))},tr=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw jn("Promise can't be resolved itself");var i=Kn(n);i?vn((function(){var r={done:!1};try{i.call(n,Qn(tr,t,r,e),Qn(Zn,t,r,e))}catch(n){Zn(t,r,n,e)}})):(e.value=n,e.state=1,Wn(t,e,!1))}catch(n){Zn(t,{done:!1},n,e)}}};function er(t){var e;return e={clientId:t,scope:["https://www.googleapis.com/auth/devstorage.read_only","https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/drive.readonly"].join(" ")},gapi.client.init(e)}function nr(){var t;gapi.auth2.getAuthInstance().isSignedIn.listen(ir),t={callback:function(){},onerror:function(){alert("Error loading Google Picker library")}},gapi.load("picker",t)}function rr(t,e){var n,r;(igv.oauth.google.access_token?Promise.resolve(igv.oauth.google.access_token):(n=["https://www.googleapis.com/auth/devstorage.read_only","https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/drive.readonly"],(r=new gapi.auth2.SigninOptionsBuilder).setPrompt("select_account"),r.setScope(n.join(" ")),gapi.auth2.getAuthInstance().signIn(r).then((function(t){var e;return e=t.getAuthResponse(),igv.setGoogleOauthToken(e.access_token),e.access_token})))).then((function(t){return t})).then((function(n){var r,i;(r=new google.picker.DocsView(google.picker.ViewId.DOCS)).setIncludeFolders(!0),(i=new google.picker.DocsView(google.picker.ViewId.DOCS)).setEnableTeamDrives(!0),i.setIncludeFolders(!0),n?(t?(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).setOAuthToken(igv.oauth.google.access_token).addView(r).addView(i).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).setCallback((function(t){t[google.picker.Response.ACTION]===google.picker.Action.PICKED&&e(t[google.picker.Response.DOCUMENTS])})).build():(new google.picker.PickerBuilder).disableFeature(google.picker.Feature.MULTISELECT_ENABLED).setOAuthToken(igv.oauth.google.access_token).addView(r).addView(i).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).setCallback((function(t){t[google.picker.Response.ACTION]===google.picker.Action.PICKED&&e(t[google.picker.Response.DOCUMENTS])})).build()).setVisible(!0):kl.presentAlert("Sign into Google before using picker")})).catch((function(t){}))}function ir(t){}Vn&&(Dn=function(t){ge(this,Dn,Cn),pe(t),En.call(this);var e=An(this);try{t(Qn(tr,this,e),Qn(Zn,this,e))}catch(t){Zn(this,e,t)}},(En=function(t){Pn(this,{type:Cn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=ue(Dn.prototype,{then:function(t,e){var n=In(this),r=Un(Ie(this,Dn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Hn?Bn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Wn(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Ln=function(){var t=new En,e=An(t);this.promise=t,this.resolve=Qn(tr,t,e),this.reject=Qn(Zn,t,e)},yn.f=Un=function(t){return t===Dn||t===On?new Ln(t):Nn(t)},"function"==typeof se&&(Rn=se.prototype.then,pt(se.prototype,"then",(function(t,e){var n=this;return new Dn((function(t,e){Rn.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Fn&&Vt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return bn(Dn,Fn.apply(m,arguments))}}))),Vt({global:!0,wrap:!0,forced:Vn},{Promise:Dn}),fe(Dn,Cn,!1),de(Cn),On=mt(Cn),Vt({target:Cn,stat:!0,forced:Vn},{reject:function(t){var e=Un(this);return e.reject.call(void 0,t),e.promise}}),Vt({target:Cn,stat:!0,forced:Vn},{resolve:function(t){return bn(this,t)}}),Vt({target:Cn,stat:!0,forced:qn},{all:function(t){var e=this,n=Un(e),r=n.resolve,i=n.reject,o=wn((function(){var n=pe(e.resolve),o=[],a=0,s=1;Ee(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Un(e),r=n.reject,i=wn((function(){var i=pe(e.resolve);Ee(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var or=Object.defineProperty,ar={},sr=function(t){throw t},ur=function(t,e){if(I(ar,t))return ar[t];e||(e={});var n=[][t],r=!!I(e,"ACCESSORS")&&e.ACCESSORS,i=I(e,0)?e[0]:sr,o=I(e,1)?e[1]:void 0;return ar[t]=!!n&&!y((function(){if(r&&!b)return!0;var t={length:-1};r?or(t,1,{enumerable:!0,get:sr}):t[1]=1,n.call(t,i,o)}))},cr=Rt.indexOf,lr=[].indexOf,fr=!!lr&&1/[1].indexOf(1,-0)<0,hr=qt("indexOf"),dr=ur("indexOf",{ACCESSORS:!0,1:0});Vt({target:"Array",proto:!0,forced:fr||!hr||!dr},{indexOf:function(t){return fr?lr.apply(this,arguments)||0:cr(this,t,arguments.length>1?arguments[1]:void 0)}});var pr=Array.isArray||function(t){return"Array"==L(t)},gr=function(t,e,n){var r=A(e);r in t?G.f(t,r,S(0,n)):t[r]=n},vr=te("species"),mr=function(t){return _n>=51||!y((function(){var e=[];return(e.constructor={})[vr]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},yr=mr("slice"),br=ur("slice",{ACCESSORS:!0,0:0,1:2}),wr=te("species"),kr=[].slice,xr=Math.max;Vt({target:"Array",proto:!0,forced:!yr||!br},{slice:function(t,e){var n,r,i,o=T(this),a=xt(o.length),s=Lt(t,a),u=Lt(void 0===e?a:e,a);if(pr(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!pr(n.prototype)?C(n)&&null===(n=n[wr])&&(n=void 0):n=void 0,n===Array||void 0===n))return kr.call(o,s,u);for(r=new(void 0===n?Array:n)(xr(u-s,0)),i=0;s<u;s++,i++)s in o&&gr(r,i,o[s]);return r.length=i,r}});var Sr=function(t){return Object(_(t))},Er=te("species"),Lr=function(t,e){var n;return pr(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!pr(n.prototype)?C(n)&&null===(n=n[Er])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Or=te("isConcatSpreadable"),Rr=_n>=51||!y((function(){var t=[];return t[Or]=!1,t.concat()[0]!==t})),_r=mr("concat"),$r=function(t){if(!C(t))return!1;var e=t[Or];return void 0!==e?!!e:pr(t)};Vt({target:"Array",proto:!0,forced:!Rr||!_r},{concat:function(t){var e,n,r,i,o,a=Sr(this),s=Lr(a,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?a:arguments[e],$r(o)){if(u+(i=xt(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,u++)n in o&&gr(s,u,o[n])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");gr(s,u++,o)}return s.length=u,s}});var Tr=function(){var t=N(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Cr(t,e){return RegExp(t,e)}var Ar,Pr,Ir={UNSUPPORTED_Y:y((function(){var t=Cr("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:y((function(){var t=Cr("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Dr=RegExp.prototype.exec,jr=String.prototype.replace,Mr=Dr,Br=(Ar=/a/,Pr=/b*/g,Dr.call(Ar,"a"),Dr.call(Pr,"a"),0!==Ar.lastIndex||0!==Pr.lastIndex),Fr=Ir.UNSUPPORTED_Y||Ir.BROKEN_CARET,Ur=void 0!==/()??/.exec("")[1];(Br||Ur||Fr)&&(Mr=function(t){var e,n,r,i,o=this,a=Fr&&o.sticky,s=Tr.call(o),u=o.source,c=0,l=t;return a&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),l=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(u="(?: "+u+")",l=" "+l,c++),n=new RegExp("^(?:"+u+")",s)),Ur&&(n=new RegExp("^"+u+"$(?!\\s)",s)),Br&&(e=o.lastIndex),r=Dr.call(a?n:o,l),a?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:Br&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),Ur&&r&&r.length>1&&jr.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var Nr=Mr;Vt({target:"RegExp",proto:!0,forced:/./.exec!==Nr},{exec:Nr});var Hr=te("species"),Gr=!y((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Vr="$0"==="a".replace(/./,"$0"),qr=te("replace"),Kr=!!/./[qr]&&""===/./[qr]("a","$0"),Wr=!y((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),zr=function(t,e,n,r){var i=te(t),o=!y((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!y((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Hr]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||"replace"===t&&(!Gr||!Vr||Kr)||"split"===t&&!Wr){var s=/./[i],u=n(i,""[t],(function(t,e,n,r,i){return e.exec===Nr?o&&!i?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Vr,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Kr}),c=u[0],l=u[1];pt(String.prototype,t,c),pt(RegExp.prototype,i,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}r&&V(RegExp.prototype[i],"sham",!0)},Jr=function(t){return function(e,n){var r,i,o=String(_(e)),a=wt(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},Xr={codeAt:Jr(!1),charAt:Jr(!0)},Yr=Xr.charAt,Qr=function(t,e,n){return e+(n?Yr(t,e).length:1)},Zr=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==L(t))throw TypeError("RegExp#exec called on incompatible receiver");return Nr.call(t,e)},ti=Math.max,ei=Math.min,ni=Math.floor,ri=/\$([$&'`]|\d\d?|<[^>]*>)/g,ii=/\$([$&'`]|\d\d?)/g;zr("replace",2,(function(t,e,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,a=i?"$":"$0";return[function(n,r){var i=_(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(a)){var u=n(e,t,this,r);if(u.done)return u.value}var c=N(t),l=String(this),f="function"==typeof r;f||(r=String(r));var h=c.global;if(h){var d=c.unicode;c.lastIndex=0}for(var p=[];;){var g=Zr(c,l);if(null===g)break;if(p.push(g),!h)break;""===String(g[0])&&(c.lastIndex=Qr(l,xt(c.lastIndex),d))}for(var v,m="",y=0,b=0;b<p.length;b++){g=p[b];for(var w=String(g[0]),k=ti(ei(wt(g.index),l.length),0),x=[],S=1;S<g.length;S++)x.push(void 0===(v=g[S])?v:String(v));var E=g.groups;if(f){var L=[w].concat(x,k,l);void 0!==E&&L.push(E);var O=String(r.apply(void 0,L))}else O=s(w,l,k,x,E,r);k>=y&&(m+=l.slice(y,k)+O,y=k+w.length)}return m+l.slice(y)}];function s(t,n,r,i,o,a){var s=r+t.length,u=i.length,c=ii;return void 0!==o&&(o=Sr(o),c=ri),e.call(a,c,(function(e,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":c=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return e;if(l>u){var f=ni(l/10);return 0===f?e:f<=u?void 0===i[f-1]?a.charAt(1):i[f-1]+a.charAt(1):e}c=i[l-1]}return void 0===c?"":c}))}}));var oi,ai,si=te("match"),ui=function(t){var e;return C(t)&&(void 0!==(e=t[si])?!!e:"RegExp"==L(t))},ci=function(t){if(ui(t))throw TypeError("The method doesn't accept regular expressions");return t},li=te("match"),fi=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[li]=!1,"/./"[t](e)}catch(t){}}return!1},hi=U.f,di="".startsWith,pi=Math.min,gi=fi("startsWith"),vi=!(gi||(oi=hi(String.prototype,"startsWith"),!oi||oi.writable));function mi(t){var e,n,i,o;return"function"==typeof t?e=t:t.provider?"tinyURL"===t.provider?(o=(o=t.endpoint)||"https://2et6uxfezb.execute-api.us-east-1.amazonaws.com/dev/tinyurl/",e=function(){var t=r(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURIComponent(e),t.next=3,fetch("".concat(o).concat(n));case 3:if(!(r=t.sent).ok){t.next=8;break}return t.abrupt("return",r.text());case 8:throw new Error(r.statusText);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):"bitly"===t.provider&&t.apiKey?e=(i=t.apiKey)&&"BITLY_TOKEN"!==i?function(){var t=r(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.startsWith("http://localhost")&&(e=e.replace("localhost","192.168.1.11")),n="https://api-ssl.bitly.com/v3/shorten?access_token="+i+"&longUrl="+encodeURIComponent(e),t.abrupt("return",igv.xhr.loadJson(n,{}).then((function(t){return t.data.url})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():void 0:"google"===t.provider&&t.apiKey?e=(n=t.apiKey)&&"API_KEY"!==n?function(){var t=r(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="https://www.googleapis.com/urlshortener/v1/url?key="+n,t.abrupt("return",igv.xhr.loadJson(r,{sendData:JSON.stringify({longUrl:e}),contentType:"application/json"}).then((function(t){return t.id})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():void 0:kl.presentAlert("Unknown URL shortener provider: ".concat(t.provider)):kl.presentAlert("URL shortener object must either be an object specifying a provider and apiKey, or a function"),e&&(ai={shortenURL:e}),e}function yi(t,e){return function(t){return ai?ai.shortenURL(t):Promise.resolve(t)}(t+"?sessionURL=blob:"+e)}Vt({target:"String",proto:!0,forced:!vi&&!gi},{startsWith:function(t){var e=String(_(this));ci(t);var n=xt(pi(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return di?di.call(e,r,n):e.slice(n,n+r.length)===r}});var bi,wi=[].push,ki=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=5==t||o;return function(s,u,c,l){for(var f,h,d=Sr(s),p=R(d),g=we(u,c,3),v=xt(p.length),m=0,y=l||Lr,b=e?y(s,v):n?y(s,0):void 0;v>m;m++)if((a||m in p)&&(h=g(f=p[m],m,d),t))if(e)b[m]=h;else if(h)switch(t){case 3:return!0;case 5:return f;case 6:return m;case 2:wi.call(b,f)}else if(i)return!1;return o?-1:r||i?i:b}},xi={forEach:ki(0),map:ki(1),filter:ki(2),some:ki(3),every:ki(4),find:ki(5),findIndex:ki(6)},Si=Object.keys||function(t){return $t(t,Tt)},Ei=b?Object.defineProperties:function(t,e){N(t);for(var n,r=Si(e),i=r.length,o=0;i>o;)G.f(t,n=r[o++],e[n]);return t},Li=ot("IE_PROTO"),Oi=function(){},Ri=function(t){return"<script>"+t+"<\/script>"},_i=function(){try{bi=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;_i=bi?function(t){t.write(Ri("")),t.close();var e=t.parentWindow.Object;return t=null,e}(bi):((e=M("iframe")).style.display="none",De.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Ri("document.F=Object")),t.close(),t.F);for(var n=Tt.length;n--;)delete _i.prototype[Tt[n]];return _i()};at[Li]=!0;var $i=Object.create||function(t,e){var n;return null!==t?(Oi.prototype=N(t),n=new Oi,Oi.prototype=null,n[Li]=t):n=_i(),void 0===e?n:Ei(n,e)},Ti=te("unscopables"),Ci=Array.prototype;null==Ci[Ti]&&G.f(Ci,Ti,{configurable:!0,value:$i(null)});var Ai=function(t){Ci[Ti][t]=!0},Pi=xi.find,Ii=!0,Di=ur("find");"find"in[]&&Array(1).find((function(){Ii=!1})),Vt({target:"Array",proto:!0,forced:Ii||!Di},{find:function(t){return Pi(this,t,arguments.length>1?arguments[1]:void 0)}}),Ai("find");var ji,Mi,Bi,Fi=!y((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ui=ot("IE_PROTO"),Ni=Object.prototype,Hi=Fi?Object.getPrototypeOf:function(t){return t=Sr(t),I(t,Ui)?t[Ui]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ni:null},Gi=te("iterator"),Vi=!1;[].keys&&("next"in(Bi=[].keys())?(Mi=Hi(Hi(Bi)))!==Object.prototype&&(ji=Mi):Vi=!0),null==ji&&(ji={}),I(ji,Gi)||V(ji,Gi,(function(){return this}));var qi={IteratorPrototype:ji,BUGGY_SAFARI_ITERATORS:Vi},Ki=qi.IteratorPrototype,Wi=function(){return this},zi=function(t,e,n){var r=e+" Iterator";return t.prototype=$i(Ki,{next:S(1,n)}),fe(t,r,!1),ve[r]=Wi,t},Ji=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return N(n),function(t){if(!C(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Xi=qi.IteratorPrototype,Yi=qi.BUGGY_SAFARI_ITERATORS,Qi=te("iterator"),Zi=function(){return this},to=function(t,e,n,r,i,o,a){zi(n,e,r);var s,u,c,l=function(t){if(t===i&&g)return g;if(!Yi&&t in d)return d[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",h=!1,d=t.prototype,p=d[Qi]||d["@@iterator"]||i&&d[i],g=!Yi&&p||l(i),v="Array"==e&&d.entries||p;if(v&&(s=Hi(v.call(new t)),Xi!==Object.prototype&&s.next&&(Hi(s)!==Xi&&(Ji?Ji(s,Xi):"function"!=typeof s[Qi]&&V(s,Qi,Zi)),fe(s,f,!0))),"values"==i&&p&&"values"!==p.name&&(h=!0,g=function(){return p.call(this)}),d[Qi]!==g&&V(d,Qi,g),ve[e]=g,i)if(u={values:l("values"),keys:o?g:l("keys"),entries:l("entries")},a)for(c in u)(Yi||h||!(c in d))&&pt(d,c,u[c]);else Vt({target:e,proto:!0,forced:Yi||h},u);return u},eo=dt.set,no=dt.getterFor("Array Iterator"),ro=to(Array,"Array",(function(t,e){eo(this,{type:"Array Iterator",target:T(t),index:0,kind:e})}),(function(){var t=no(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");ve.Arguments=ve.Array,Ai("keys"),Ai("values"),Ai("entries");var io=G.f,oo=Function.prototype,ao=oo.toString,so=/^\s*function ([^ (]*)/;b&&!("name"in oo)&&io(oo,"name",{configurable:!0,get:function(){try{return ao.call(this).match(so)[1]}catch(t){return""}}});var uo=!y((function(){return Object.isExtensible(Object.preventExtensions({}))})),co=e((function(t){var e=G.f,n=rt("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!C(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!I(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!I(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return uo&&a.REQUIRED&&i(t)&&!I(t,n)&&o(t),t}};at[n]=!0})),lo=(co.REQUIRED,co.fastKey,co.getWeakData,co.onFreeze,G.f),fo=co.fastKey,ho=dt.set,po=dt.getterFor,go=(function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",a=m[t],s=a&&a.prototype,u=a,c={},l=function(t){var e=s[t];pt(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!C(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return i&&!C(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!C(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Ht(t,"function"!=typeof a||!(i||s.forEach&&!y((function(){(new a).entries().next()})))))u=n.getConstructor(e,t,r,o),co.REQUIRED=!0;else if(Ht(t,!0)){var f=new u,h=f[o](i?{}:-0,1)!=f,d=y((function(){f.has(1)})),p=Ae((function(t){new a(t)})),g=!i&&y((function(){for(var t=new a,e=5;e--;)t[o](e,e);return!t.has(-0)}));p||((u=e((function(e,n){ge(e,u,t);var i=function(t,e,n){var r,i;return Ji&&"function"==typeof(r=e.constructor)&&r!==n&&C(i=r.prototype)&&i!==n.prototype&&Ji(t,i),t}(new a,e,u);return null!=n&&Ee(n,i[o],i,r),i}))).prototype=s,s.constructor=u),(d||g)&&(l("delete"),l("has"),r&&l("get")),(g||h)&&l(o),i&&s.clear&&delete s.clear}c[t]=u,Vt({global:!0,forced:u!=a},c),fe(u,t),i||n.setStrong(u,t,r)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,r){var i=t((function(t,o){ge(t,i,e),ho(t,{type:e,index:$i(null),first:void 0,last:void 0,size:0}),b||(t.size=0),null!=o&&Ee(o,t[r],t,n)})),o=po(e),a=function(t,e,n){var r,i,a=o(t),u=s(t,e);return u?u.value=n:(a.last=u={index:i=fo(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=u),r&&(r.next=u),b?a.size++:t.size++,"F"!==i&&(a.index[i]=u)),t},s=function(t,e){var n,r=o(t),i=fo(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return ue(i.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,b?t.size=0:this.size=0},delete:function(t){var e=o(this),n=s(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),b?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=o(this),r=we(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),ue(i.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),b&&lo(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=po(e),o=po(r);to(t,e,(function(t,e){ho(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),de(e)}}),Xr.charAt),vo=dt.set,mo=dt.getterFor("String Iterator");to(String,"String",(function(t){vo(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=mo(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=go(n,r),e.index+=t.length,{value:t,done:!1})}));var yo=[].push,bo=Math.min,wo=!y((function(){return!RegExp(4294967295,"y")}));zr("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(_(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!ui(t))return e.call(r,t,i);for(var o,a,s,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=new RegExp(t.source,c+"g");(o=Nr.call(f,r))&&!((a=f.lastIndex)>l&&(u.push(r.slice(l,o.index)),o.length>1&&o.index<r.length&&yo.apply(u,o.slice(1)),s=o[0].length,l=a,u.length>=i));)f.lastIndex===o.index&&f.lastIndex++;return l===r.length?!s&&f.test("")||u.push(""):u.push(r.slice(l)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=_(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var a=N(t),s=String(this),u=Ie(a,RegExp),c=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(wo?"y":"g"),f=new u(wo?a:"^(?:"+a.source+")",l),h=void 0===i?4294967295:i>>>0;if(0===h)return[];if(0===s.length)return null===Zr(f,s)?[s]:[];for(var d=0,p=0,g=[];p<s.length;){f.lastIndex=wo?p:0;var v,m=Zr(f,wo?s:s.slice(p));if(null===m||(v=bo(xt(f.lastIndex+(wo?0:p)),s.length))===d)p=Qr(s,p,c);else{if(g.push(s.slice(d,p)),g.length===h)return g;for(var y=1;y<=m.length-1;y++)if(g.push(m[y]),g.length===h)return g;p=d=v}}return g.push(s.slice(d)),g}]}),!wo);var ko={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},xo=te("iterator"),So=te("toStringTag"),Eo=ro.values;for(var Lo in ko){var Oo=m[Lo],Ro=Oo&&Oo.prototype;if(Ro){if(Ro[xo]!==Eo)try{V(Ro,xo,Eo)}catch(t){Ro[xo]=Eo}if(Ro[So]||V(Ro,So,Lo),ko[Lo])for(var _o in ro)if(Ro[_o]!==ro[_o])try{V(Ro,_o,ro[_o])}catch(t){Ro[_o]=ro[_o]}}}var $o={},To=new Set(["fai","bai","crai","tbi","idx"]),Co=function(t){var e=new Set(["fa","fasta"]);return new Set([].concat(h(igv.knownFileExtensions),h(e))).has(t)},Ao=function(t){return t.google_url?t.name:igv.getFilename(t)},Po=function(t){return igv.getExtension({url:t.google_url?t.name:t})},Io=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;e.find(".modal-header button:nth-child(1)").on("click",(function(){t.dismiss(),e.modal("hide")})),e.find(".modal-footer button:nth-child(1)").on("click",(function(){t.dismiss(),e.modal("hide")})),e.find(".modal-footer button:nth-child(2)").on("click",(function(){!0===(n?n(t.fileLoadManager):t.fileLoadManager.okHandler())&&(t.dismiss(),e.modal("hide"))}))},Do=function(t){var e;(e=r(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0,t.prev=1,t.next=4,$o.browser.loadGenome(e);case 4:n=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),kl.presentAlert(t.t0.message);case 10:if(!n){t.next=14;break}ml.updateTrackMenus(n.id),t.next=17;break;case 14:throw r=new Error("Unable to load genome ".concat(e.name)),kl.presentAlert(r.message),r;case 17:case"end":return t.stop()}}),t,null,[[1,7]])}))),function(t){return e.apply(this,arguments)})(t)},jo=function(t){var e={fa:{index:"fai",isOptional:!1},fasta:{index:"fai",isOptional:!1},bam:{index:"bai",isOptional:!1},cram:{index:"crai",isOptional:!1},gz:{index:"tbi",isOptional:!0},bgz:{index:"tbi",isOptional:!0}};return e[t]?e[t]:{index:"idx",isOptional:!0}},Mo=function(){function t(e,n){i(this,t);var r,o=this;this.config=e,void 0===this.config.dataOnly&&(this.config.dataOnly=!1),this.config.dataTitle=e.dataTitle||"Data",this.config.indexTitle=e.indexTitle||"Index",this.$parent=e.$widgetParent,this.fileLoadManager=n,this.fileLoadManager.fileLoadWidget=this,this.$container=$("<div>",{class:"igv-file-load-widget-container"}),this.$parent.append(this.$container),r="localFile"===e.mode?{doURL:!1,dataTitle:e.dataTitle+" file",indexTitle:e.indexTitle+" file",dataOnly:this.config.dataOnly}:{doURL:!0,dataTitle:e.dataTitle+" URL",indexTitle:e.indexTitle+" URL",dataOnly:this.config.dataOnly},this.createInputContainer(this.$container,r),this.$error_message=$("<div>",{class:"igv-flw-error-message-container"}),this.$container.append(this.$error_message),this.$error_message.append($("<div>",{class:"igv-flw-error-message"})),igv.attachDialogCloseHandlerWithParent(this.$error_message,(function(){o.dismissErrorMessage()})),this.dismissErrorMessage()}return a(t,[{key:"presentErrorMessage",value:function(t){this.$error_message.find(".igv-flw-error-message").text(t),this.$error_message.show()}},{key:"dismissErrorMessage",value:function(){this.$error_message.hide(),this.$error_message.find(".igv-flw-error-message").text("")}},{key:"present",value:function(){this.$container.show()}},{key:"dismiss",value:function(){this.dismissErrorMessage(),this.$container.find("input").val(void 0),this.$container.find(".igv-flw-local-file-name-container").hide(),this.fileLoadManager.reset()}},{key:"customizeLayout",value:function(t){t(this.$container)}},{key:"createInputContainer",value:function(t,e){var n,r,i,o;n=$("<div>",{class:"igv-flw-input-container"}),t.append(n),r=$("<div>",{class:"igv-flw-input-row"}),n.append(r),o=$("<div>",{class:"igv-flw-input-label"}),r.append(o),o.text(e.dataTitle),!0===e.doURL?this.createURLContainer(r,"igv-flw-data-url",!1):this.createLocalFileContainer(r,"igv-flw-local-data-file",!1),!0!==e.dataOnly&&(i=$("<div>",{class:"igv-flw-input-row"}),n.append(i),o=$("<div>",{class:"igv-flw-input-label"}),i.append(o),o.text(e.indexTitle),!0===e.doURL?this.createURLContainer(i,"igv-flw-index-url",!0):this.createLocalFileContainer(i,"igv-flw-local-index-file",!0))}},{key:"createURLContainer",value:function(t,e,n){var r,i=this;r=$("<input>",{type:"text",placeholder:!0===n?"Enter index URL":"Enter data URL"}),t.append(r),n?this.$inputIndex=r:this.$inputData=r,t.on("drag dragstart dragend dragover dragenter dragleave drop",(function(t){t.preventDefault(),t.stopPropagation(),i.dismissErrorMessage()})).on("dragover dragenter",(function(t){$(this).addClass("igv-flw-input-row-hover-state")})).on("dragleave dragend drop",(function(t){$(this).removeClass("igv-flw-input-row-hover-state")})).on("drop",(function(t){if(!1===i.fileLoadManager.didDragDrop(t.originalEvent.dataTransfer)){i.fileLoadManager.dragDropHandler(t.originalEvent.dataTransfer,n);var e=n?i.fileLoadManager.indexName():i.fileLoadManager.dataName();r.val(e)}}))}},{key:"createLocalFileContainer",value:function(t,e,n){var r,i,o,a,s,u=this;r=$("<div>",{class:"igv-flw-file-chooser-container"}),t.append(r),s=e+igv.guid(),i=$("<label>",{for:s}),r.append(i),i.text("Choose file"),o=$("<input>",{class:"igv-flw-file-chooser-input",id:s,name:s,type:"file"}),r.append(o),r.hover((function(){i.removeClass("igv-flw-label-color"),i.addClass("igv-flw-label-color-hover")}),(function(){i.removeClass("igv-flw-label-color-hover"),i.addClass("igv-flw-label-color")})),a=$("<div>",{class:"igv-flw-local-file-name-container"}),t.append(a),a.hide(),o.on("change",(function(t){u.dismissErrorMessage(),u.fileLoadManager.inputHandler(t.target.files[0],n),a.text(t.target.files[0].name),a.attr("title",t.target.files[0].name),a.show()})),t.on("drag dragstart dragend dragover dragenter dragleave drop",(function(t){t.preventDefault(),t.stopPropagation(),u.dismissErrorMessage()})).on("dragover dragenter",(function(t){$(this).addClass("igv-flw-input-row-hover-state")})).on("dragleave dragend drop",(function(t){$(this).removeClass("igv-flw-input-row-hover-state")})).on("drop",(function(t){var e;!0===u.fileLoadManager.didDragDrop(t.originalEvent.dataTransfer)&&(u.fileLoadManager.dragDropHandler(t.originalEvent.dataTransfer,n),e=n?u.fileLoadManager.indexName():u.fileLoadManager.dataName(),a.text(e),a.attr("title",e),a.show())}))}}]),t}(),Bo="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Fo="["+Bo+"]",Uo=RegExp("^"+Fo+Fo+"*"),No=RegExp(Fo+Fo+"*$"),Ho=function(t){return function(e){var n=String(_(e));return 1&t&&(n=n.replace(Uo,"")),2&t&&(n=n.replace(No,"")),n}},Go={start:Ho(1),end:Ho(2),trim:Ho(3)},Vo=Go.trim;Vt({target:"String",proto:!0,forced:function(t){return y((function(){return!!Bo[t]()||"âÂá "!="âÂá "[t]()||Bo[t].name!==t}))}("trim")},{trim:function(){return Vo(this)}});var qo=function(){function t(){i(this,t),this.dictionary={}}return a(t,[{key:"inputHandler",value:function(t,e){this.ingestPath(t,e)}},{key:"getPaths",value:function(){var t=[];return this.ingestPaths(),this.dictionary&&(this.dictionary.data&&t.push(this.dictionary.data),this.dictionary.index&&t.push(this.dictionary.index)),t}},{key:"ingestPaths",value:function(){this.ingestPath(this.fileLoadWidget.$inputData.val(),!1),this.fileLoadWidget.$inputIndex&&this.ingestPath(this.fileLoadWidget.$inputIndex.val(),!0)}},{key:"ingestPath",value:function(t,e){var n=!0===e?"index":"data";this.dictionary[n]=t.trim()}},{key:"didDragDrop",value:function(t){var e;return(e=t.files)&&e.length>0}},{key:"dragDropHandler",value:function(t,e){var n,r;n=t.getData("text/uri-list"),(r=t.files)&&r.length>0?this.ingestPath(r[0],e):n&&""!==n&&this.ingestPath(n,e)}},{key:"indexName",value:function(){return Ko(this.dictionary.index)}},{key:"dataName",value:function(){return Ko(this.dictionary.data)}},{key:"reset",value:function(){this.dictionary={}}}]),t}();function Ko(t){return igv.isFilePath(t)?t.name:t}var Wo=function(){function t(e,n){var r=n.$urlModal,o=n.genomes,a=n.uberFileLoader;i(this,t),this.genomes=o;var s={dataTitle:"Genome",$widgetParent:r.find(".modal-body"),mode:"url"};this.urlWidget=new Mo(s,new qo),Io(this.urlWidget,r,(function(t){return a.ingestPaths(t.getPaths()),!0}))}var e;return a(t,[{key:"getAppLaunchGenomes",value:(e=r(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==this.genomes){t.next=2;break}return t.abrupt("return",void 0);case 2:if(!Array.isArray(this.genomes)){t.next=6;break}return t.abrupt("return",zo(this.genomes));case 6:return e=void 0,t.prev=7,t.next=10,fetch(this.genomes);case 10:e=t.sent,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),kl.presentAlert(t.t0.message);case 16:if(!e){t.next=21;break}return t.next=19,e.json();case 19:return n=t.sent,t.abrupt("return",zo(n));case 21:case"end":return t.stop()}}),t,this,[[7,13]])}))),function(){return e.apply(this,arguments)})}]),t}(),zo=function(t){var e={};if(!0===Array.isArray(t)){var n,r=g(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e[i.id]=i}}catch(t){r.e(t)}finally{r.f()}}else e[t.id]=t;return e};function Jo(t){var e=t.browser,n=t.genomeDictionary,r=t.$dropdown_menu.find("#igv-app-genome-dropdown-divider");for(var i in r.prevAll().remove(),n)n.hasOwnProperty(i)&&function(){var t=o(n[i].name);t.insertBefore(r),t.data("id",i);var a="click.genome-dropdown.".concat(i);t.on(a,(function(){var r=t.data("id");r!==e.genome.id&&Do(n[r])}))}();function o(t){var e=$("<button>",{class:"dropdown-item",type:"button"});return e.text(t),e}}var Xo=xi.filter,Yo=mr("filter"),Qo=ur("filter");Vt({target:"Array",proto:!0,forced:!Yo||!Qo},{filter:function(t){return Xo(this,t,arguments.length>1?arguments[1]:void 0)}});var Zo=xi.forEach,ta=qt("forEach"),ea=ur("forEach"),na=ta&&ea?[].forEach:function(t){return Zo(this,t,arguments.length>1?arguments[1]:void 0)};Vt({target:"Array",proto:!0,forced:[].forEach!=na},{forEach:na});var ra=function(t){var e,n,r,i,o,a,s=Sr(t),u="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,f=void 0!==l,h=xe(s),d=0;if(f&&(l=we(l,c>2?arguments[2]:void 0,2)),null==h||u==Array&&be(h))for(n=new u(e=xt(s.length));e>d;d++)a=f?l(s[d],d):s[d],gr(n,d,a);else for(o=(i=h.call(s)).next,n=new u;!(r=o.call(i)).done;d++)a=f?Se(i,l,[r.value,d],!0):r.value,gr(n,d,a);return n.length=d,n},ia=!Ae((function(t){Array.from(t)}));Vt({target:"Array",stat:!0,forced:ia},{from:ra});var oa=Rt.includes,aa=ur("indexOf",{ACCESSORS:!0,1:0});Vt({target:"Array",proto:!0,forced:!aa},{includes:function(t){return oa(this,t,arguments.length>1?arguments[1]:void 0)}}),Ai("includes");var sa=xi.map,ua=mr("map"),ca=ur("map");Vt({target:"Array",proto:!0,forced:!ua||!ca},{map:function(t){return sa(this,t,arguments.length>1?arguments[1]:void 0)}});var la=function(t){return function(e,n,r,i){pe(n);var o=Sr(e),a=R(o),s=xt(o.length),u=t?s-1:0,c=t?-1:1;if(r<2)for(;;){if(u in a){i=a[u],u+=c;break}if(u+=c,t?u<0:s<=u)throw TypeError("Reduce of empty array with no initial value")}for(;t?u>=0:s>u;u+=c)u in a&&(i=n(i,a[u],u,o));return i}},fa={left:la(!1),right:la(!0)}.left,ha=qt("reduce"),da=ur("reduce",{1:0});Vt({target:"Array",proto:!0,forced:!ha||!da},{reduce:function(t){return fa(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var pa=y((function(){Si(1)}));Vt({target:"Object",stat:!0,forced:pa},{keys:function(t){return Si(Sr(t))}}),Vt({target:"String",proto:!0,forced:!fi("includes")},{includes:function(t){return!!~String(_(this)).indexOf(ci(t),arguments.length>1?arguments[1]:void 0)}});var ga=/"/g;for(var va in Vt({target:"String",proto:!0,forced:function(t){return y((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}("link")},{link:function(t){return e="a",n="href",r=t,i=String(_(this)),o="<"+e,""!==n&&(o+=" "+n+'="'+String(r).replace(ga,"&quot;")+'"'),o+">"+i+"</"+e+">";var e,n,r,i,o}}),ko){var ma=m[va],ya=ma&&ma.prototype;if(ya&&ya.forEach!==na)try{V(ya,"forEach",na)}catch(t){ya.forEach=na}}var ba=new Set(["vcf","bed","gff","gtf","gff3","bedgraph"]),wa=function(){function t(e,n){i(this,t),this.browser=e,this.config=n,void 0===this.config.multipleFileSelection&&(this.config.multipleFileSelection=!0),this.pathValidator=n.pathValidator,this.jsonFileValidator=n.jsonFileValidator,this.fileLoadHander=n.fileLoadHandler,this.configurationHandler=n.configurationHandler,this.$modal=n.$modal,this.$modal_body=this.$modal.find(".modal-body"),this.createLocalInput(n.$localFileInput),this.createDropboxButton(n.$dropboxButton,n.multipleFileSelection),n.$googleDriveButton&&this.createGoogleDriveButton(n.$googleDriveButton,n.multipleFileSelection)}var e;return a(t,[{key:"ingestPaths",value:(e=r(regeneratorRuntime.mark((function e(n){var r,i,o,a,s,u,c,l,f,h,d,p,v,m,y,b,w,k,x,S,E,L,O,R,_,$,T,C,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this,f=[],h=[],d=g(n),e.prev=4,d.s();case 6:if((p=d.n()).done){e.next=22;break}if(v=p.value,!igv.isFilePath(v)){e.next=12;break}f.push(v),e.next=20;break;case 12:if(void 0!==v.google_url||!v.includes("drive.google.com")){e.next=19;break}return e.next=15,igv.google.getDriveFileInfo(v);case 15:m=e.sent,h.push({filename:m.name,name:m.name,google_url:v}),e.next=20;break;case 19:f.push(v);case 20:e.next=6;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(4),d.e(e.t0);case 27:return e.prev=27,d.f(),e.finish(27);case 30:if(n=f.concat(h),!((y=n.filter((function(t){return"json"===Po(t)}))).length>0)){e.next=50;break}return c=y.map((function(t){var e=t.google_url||t;return{name:Ao(t),promise:igv.xhr.loadJson(e)}})),e.next=36,Promise.all(c.map((function(t){return t.promise})));case 36:if(w=e.sent,k=w.map((function(t){return r.jsonFileValidator(t)})),!((x=k.map((function(t,e){return{isValid:t,path:y[e]}})).filter((function(t){return!1===t.isValid}))).length>0)){e.next=42;break}return this.presentInvalidFiles(x.map((function(t){return t.path}))),e.abrupt("return");case 42:if(S=w.pop(),!0!==t.sessionJSONValidator(S)){e.next=47;break}return(E=y.pop()).google_url?this.browser.loadSession({url:E.google_url,filename:E.name}):((L={}).filename=Ao(E),!0===igv.isFilePath(E)?L.file=E:L.url=E,this.browser.loadSession(L)),e.abrupt("return");case 47:b=n.filter((function(t){return"json"!==Po(t)})),e.next=51;break;case 50:b=n;case 51:if(0!==y.length||0!==b.length){e.next=54;break}return kl.presentAlert("ERROR: No valid data files submitted"),e.abrupt("return");case 54:if(!((O=b.filter((function(t){return"xml"===Po(t)}))).length>0)){e.next=62;break}return R=O.pop(),(_={}).filename=Ao(R),!0===igv.isFilePath(R)?_.file=R:_.url=R.google_url||R,this.browser.loadSession(_),e.abrupt("return");case 62:if(!(($=b.map((function(t){return Po(t)}))).length>0)){e.next=70;break}if(!((T=$.map((function(t){return r.pathValidator(t)}))).length>0)){e.next=70;break}if(!((C=T.map((function(t,e){return{isValid:t,path:b[e]}})).filter((function(t){return!1===t.isValid}))).length>0)){e.next=70;break}return this.presentInvalidFiles(C.map((function(t){return t.path}))),e.abrupt("return");case 70:for(A in i=ka(b),o=xa(b),a=Ea(i,o),s=new Set,a)a.hasOwnProperty(A)&&a[A].forEach((function(t){t&&s.add(t.name)}));u=Object.keys(o).reduce((function(t,e){return!1===s.has(e)&&t.push(e),t}),[]),l=Object.keys(i).reduce((function(t,e){return!1===La(e,a)&&t.push(r.configurationHandler(e,i[e],a)),t}),[]),y.length>0?this.jsonRetrievalSerial(c,l,i,a,u):(l.length>0&&this.fileLoadHander(l),this.renderTrackFileSelection(i,a,u,new Set));case 78:case"end":return e.stop()}}),e,this,[[4,24,27,30]])}))),function(t){return e.apply(this,arguments)})},{key:"createLocalInput",value:function(e){var n=this;e.on("change",(function(){if(!0===t.isValidLocalFileInput($(this))){var e=$(this).get(0),r=Array.from(e.files);e.value="",n.ingestPaths(r)}}))}},{key:"createDropboxButton",value:function(t,e){var n=this;t.on("click",(function(){var t;t={success:function(t){return n.ingestPaths(t.map((function(t){return t.link})))},cancel:function(){},linkType:"preview",multiselect:e,folderselect:!1},Dropbox.choose(t)}))}},{key:"createGoogleDriveButton",value:function(t,e){var n,r=this;t.on("click",(function(){rr(e,(function(t){n=t.map((function(t){return{filename:t.name,name:t.name,google_url:t.url}})),r.ingestPaths(n)}))}))}},{key:"jsonRetrievalParallel",value:function(t,e,n,r,i){var o=this;Promise.all(t.map((function(t){return t.promise}))).then((function(t){var a;t&&t.length>0?(a=t.reduce((function(t,e){return!0===Array.isArray(e)?e.forEach((function(e){t.push(e)})):t.push(e),t}),[]),e.push.apply(e,a),o.fileLoadHander(e),o.renderTrackFileSelection(n,r,i,new Set)):o.renderTrackFileSelection(n,r,i,new Set)})).catch((function(t){o.renderTrackFileSelection(n,r,i,new Set)}))}},{key:"jsonRetrievalSerial",value:function(t,e,n,r,i){var o,a,s,u=this;o=new Set(t.map((function(t){return t.name}))),a=new Set,s=[],t.reduce((function(t,e){return t.then((function(t){return e.promise.then((function(n){return a.add(e.name),s=[].concat(h(t),[n])}))}))}),Promise.resolve([])).then((function(t){u.jsonConfigurator(n,r,i,s,e,o,a)})).catch((function(t){u.jsonConfigurator(n,r,i,s,e,o,a)}))}},{key:"renderTrackFileSelection",value:function(t,e,n,r){var i;(i=Object.keys(t).reduce((function(t,n){return!0===La(n,e)&&t.push("<div><span>&nbsp;&nbsp;&nbsp;&nbsp;"+n+"</span>&nbsp;&nbsp;&nbsp;ERROR: index file must also be selected</div>"),t}),[]),n.forEach((function(t){i.push("<div><span>&nbsp;&nbsp;&nbsp;&nbsp;"+t+"</span>&nbsp;&nbsp;&nbsp;ERROR: data file must also be selected</div>")})),r.forEach((function(t){i.push("<div><span>&nbsp;&nbsp;&nbsp;&nbsp;"+t+"</span>&nbsp;&nbsp;&nbsp;ERROR: problems parsing JSON</div>")})),i.length>0)&&(i.unshift("<div> The following files were not loaded ...</div>"),this.$modal.find(".modal-title").text(this.config.modalTitle),this.$modal_body.empty(),this.$modal_body.append(i.join("")),this.$modal.modal("show"))}},{key:"jsonConfigurator",value:function(t,e,n,r,i,o,a){var s,u;r.length>0?(u=r.reduce((function(t,e){return!0===Array.isArray(e)?e.forEach((function(e){t.push(e)})):t.push(e),t}),[]),i.push.apply(i,u),this.fileLoadHander(i),s=h(o).filter((function(t){return!a.has(t)})),this.renderTrackFileSelection(t,e,n,s)):(i.length>0&&this.fileLoadHander(i),s=h(o).filter((function(t){return!a.has(t)})),this.renderTrackFileSelection(t,e,n,s))}},{key:"presentInvalidFiles",value:function(t){var e=[];e.push("<div> Invalid Files </div>");var n,r=g(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=Ao(i);e.push("<div><span>"+o+"</span></div>")}}catch(t){r.e(t)}finally{r.f()}this.$modal.find(".modal-title").text(this.config.modalTitle),this.$modal_body.empty(),this.$modal_body.append(e.join("")),this.$modal.modal("show")}}],[{key:"isValidLocalFileInput",value:function(t){return t.get(0).files&&t.get(0).files.length>0}},{key:"trackConfigurator",value:function(t,e,n){var r;r={name:t,filename:t,format:igv.inferFileFormat(t),url:e,indexURL:Sa(n[t])};var i=Sa(n[t]);return i?r.indexURL=i:ba.has(r.format)&&(r.indexed=!1),igv.inferTrackTypes(r),r}},{key:"genomeConfigurator",value:function(t,e,n){return{fastaURL:e,indexURL:Sa(n[t])}}},{key:"sessionConfigurator",value:function(t,e,n){return{session:e}}},{key:"genomeJSONValidator",value:function(t){return new Set(Object.keys(t)).has("fastaURL")}},{key:"sessionJSONValidator",value:function(t){var e=new Set(Object.keys(t));return e.has("genome")||e.has("reference")}},{key:"trackJSONValidator",value:function(t){return new Set(Object.keys(t)).has("url")}},{key:"genomePathValidator",value:function(t){return new Set(["fai","fa","fasta"]).has(t)}},{key:"trackPathValidator",value:function(t){return igv.knownFileExtensions.has(t)||To.has(t)}}]),t}();function ka(t){return t.filter((function(t){return Co(Po(t))})).reduce((function(t,e){return t[Ao(e)]=e.google_url||e,t}),{})}function xa(t){return t.filter((function(t){return function(t){return To.has(Po(t))}(Po(t))})).reduce((function(t,e){return t[Ao(e)]=e.google_url||e,t}),{})}function Sa(t){return t?t[0]?t[0].path:t[1]?t[1].path:void 0:void 0}function Ea(t,e){return Object.keys(t).map((function(t){var n;for(var r in n=function(t){var e,n,r,i,o;if(e=Po(t),!1!==Co(e)){var a,s;if(n=t.split(".").pop(),(i={})[o=t+"."+(r=jo(n)).index]={},i[o].data=t,i[o].isOptional=r.isOptional,"bam"===e||"cram"===e)(s=t.split(".")).pop(),i[a=s.join(".")+"."+r.index]={},i[a].data=t,i[a].isOptional=r.isOptional;return i}}(t))n.hasOwnProperty(r)&&(n[r].missing=void 0===e[r]);return n})).filter((function(t){var e;return 1!==Object.keys(t).length||(!0!==(e=t[Object.keys(t)[0]]).missing||!0!==e.isOptional)&&(!1===e.missing&&!1===e.isOptional||!0===e.missing&&e.isOptional,!0)})).reduce((function(t,n){for(var r in n)if(n.hasOwnProperty(r)){var i;void 0===t[(i=n[r]).data]&&(t[i.data]=[]),t[i.data].push(!1===i.missing?{name:r,path:e[r]}:void 0)}return t}),{})}function La(t,e){var n,r;if(void 0===e[t])n=!1;else if(e&&e[t]){var i;if(r=e[t][0],1===e[t].length)n=void 0===r;else i=e[t][1],n=!r&&!i}else n=!0;return n}var Oa=At.f,Ra={}.toString,_a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],$a={f:function(t){return _a&&"[object Window]"==Ra.call(t)?function(t){try{return Oa(t)}catch(t){return _a.slice()}}(t):Oa(T(t))}},Ta={f:te},Ca=G.f,Aa=xi.forEach,Pa=ot("hidden"),Ia=te("toPrimitive"),Da=dt.set,ja=dt.getterFor("Symbol"),Ma=Object.prototype,Ba=m.Symbol,Fa=mt("JSON","stringify"),Ua=U.f,Na=G.f,Ha=$a.f,Ga=x.f,Va=tt("symbols"),qa=tt("op-symbols"),Ka=tt("string-to-symbol-registry"),Wa=tt("symbol-to-string-registry"),za=tt("wks"),Ja=m.QObject,Xa=!Ja||!Ja.prototype||!Ja.prototype.findChild,Ya=b&&y((function(){return 7!=$i(Na({},"a",{get:function(){return Na(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Ua(Ma,e);r&&delete Ma[e],Na(t,e,n),r&&t!==Ma&&Na(Ma,e,r)}:Na,Qa=function(t,e){var n=Va[t]=$i(Ba.prototype);return Da(n,{type:"Symbol",tag:t,description:e}),b||(n.description=e),n},Za=Xt?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Ba},ts=function(t,e,n){t===Ma&&ts(qa,e,n),N(t);var r=A(e,!0);return N(n),I(Va,r)?(n.enumerable?(I(t,Pa)&&t[Pa][r]&&(t[Pa][r]=!1),n=$i(n,{enumerable:S(0,!1)})):(I(t,Pa)||Na(t,Pa,S(1,{})),t[Pa][r]=!0),Ya(t,r,n)):Na(t,r,n)},es=function(t,e){N(t);var n=T(e),r=Si(n).concat(os(n));return Aa(r,(function(e){b&&!ns.call(n,e)||ts(t,e,n[e])})),t},ns=function(t){var e=A(t,!0),n=Ga.call(this,e);return!(this===Ma&&I(Va,e)&&!I(qa,e))&&(!(n||!I(this,e)||!I(Va,e)||I(this,Pa)&&this[Pa][e])||n)},rs=function(t,e){var n=T(t),r=A(e,!0);if(n!==Ma||!I(Va,r)||I(qa,r)){var i=Ua(n,r);return!i||!I(Va,r)||I(n,Pa)&&n[Pa][r]||(i.enumerable=!0),i}},is=function(t){var e=Ha(T(t)),n=[];return Aa(e,(function(t){I(Va,t)||I(at,t)||n.push(t)})),n},os=function(t){var e=t===Ma,n=Ha(e?qa:T(t)),r=[];return Aa(n,(function(t){!I(Va,t)||e&&!I(Ma,t)||r.push(Va[t])})),r};if(Jt||(pt((Ba=function(){if(this instanceof Ba)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=rt(t),n=function(t){this===Ma&&n.call(qa,t),I(this,Pa)&&I(this[Pa],e)&&(this[Pa][e]=!1),Ya(this,e,S(1,t))};return b&&Xa&&Ya(Ma,e,{configurable:!0,set:n}),Qa(e,t)}).prototype,"toString",(function(){return ja(this).tag})),pt(Ba,"withoutSetter",(function(t){return Qa(rt(t),t)})),x.f=ns,G.f=ts,U.f=rs,At.f=$a.f=is,Pt.f=os,Ta.f=function(t){return Qa(te(t),t)},b&&(Na(Ba.prototype,"description",{configurable:!0,get:function(){return ja(this).description}}),pt(Ma,"propertyIsEnumerable",ns,{unsafe:!0}))),Vt({global:!0,wrap:!0,forced:!Jt,sham:!Jt},{Symbol:Ba}),Aa(Si(za),(function(t){!function(t){var e=gt.Symbol||(gt.Symbol={});I(e,t)||Ca(e,t,{value:Ta.f(t)})}(t)})),Vt({target:"Symbol",stat:!0,forced:!Jt},{for:function(t){var e=String(t);if(I(Ka,e))return Ka[e];var n=Ba(e);return Ka[e]=n,Wa[n]=e,n},keyFor:function(t){if(!Za(t))throw TypeError(t+" is not a symbol");if(I(Wa,t))return Wa[t]},useSetter:function(){Xa=!0},useSimple:function(){Xa=!1}}),Vt({target:"Object",stat:!0,forced:!Jt,sham:!b},{create:function(t,e){return void 0===e?$i(t):es($i(t),e)},defineProperty:ts,defineProperties:es,getOwnPropertyDescriptor:rs}),Vt({target:"Object",stat:!0,forced:!Jt},{getOwnPropertyNames:is,getOwnPropertySymbols:os}),Vt({target:"Object",stat:!0,forced:y((function(){Pt.f(1)}))},{getOwnPropertySymbols:function(t){return Pt.f(Sr(t))}}),Fa){var as=!Jt||y((function(){var t=Ba();return"[null]"!=Fa([t])||"{}"!=Fa({a:t})||"{}"!=Fa(Object(t))}));Vt({target:"JSON",stat:!0,forced:as},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(C(e)||void 0!==t)&&!Za(t))return pr(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Za(e))return e}),i[1]=e,Fa.apply(null,i)}})}Ba.prototype[Ia]||V(Ba.prototype,Ia,Ba.prototype.valueOf),fe(Ba,"Symbol"),at[Pa]=!0;var ss=G.f,us=m.Symbol;if(b&&"function"==typeof us&&(!("description"in us.prototype)||void 0!==us().description)){var cs={},ls=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof ls?new us(t):void 0===t?us():us(t);return""===t&&(cs[e]=!0),e};Dt(ls,us);var fs=ls.prototype=us.prototype;fs.constructor=ls;var hs=fs.toString,ds="Symbol(test)"==String(us("test")),ps=/^Symbol\((.*)\)[^)]+$/;ss(fs,"description",{configurable:!0,get:function(){var t=C(this)?this.valueOf():this,e=hs.call(t);if(I(cs,t))return"";var n=ds?e.slice(7,-1):e.replace(ps,"$1");return""===n?void 0:n}}),Vt({global:!0,forced:!0},{Symbol:ls})}var gs=function(t){this.data=t,this.ptr=0};gs.prototype.nextLine=function(){var t=this.ptr,e=this.data.indexOf("\n",t);return e>0?(this.ptr=e+1,e===t?void 0:this.data.substring(t,e).trim()):(this.ptr=this.data.length,t>=this.data.length?void 0:this.data.substring(t).trim())},gs.prototype.nextLineNoTrim=function(){var t=this.ptr,e=this.data.indexOf("\n",t),n=this.data;if(e>0)return this.ptr=e+1,e>t&&"\r"===n.charAt(e-1)?n.substring(t,e-1):n.substring(t,e);var r=n.length;return this.ptr=r,t>=r?void 0:n.substring(t)};var vs=function(t){this.data=t,this.length=this.data.length,this.ptr=0};vs.prototype.nextLine=function(){var t,e;if(e="",!(this.ptr>=this.length)){for(var n=this.ptr;n<this.length;n++)if("\r"!==(t=String.fromCharCode(this.data[n]))){if("\n"===t)break;e+=t}return this.ptr=n+1,e}},vs.prototype.nextLineNoTrim=vs.prototype.nextLine;const ms=["Biosample","Target","Assay Type","Output Type","Bio Rep","Tech Rep","Format","Experiment","Accession","Lab"];class ys{constructor(t,e,n){this.genomeId=t,this.filter=e,this.suffix=n||".txt"}async tableData(){return this.fetchData()}async tableColumns(){return ms}async fetchData(){const t="https://s3.amazonaws.com/igv.org.app/encode/"+ks(this.genomeId)+this.suffix,e=await fetch(t),n=function(t,e){var n,r;n=function(t){return"string"==typeof t||t instanceof String?new gs(t):new vs(t)}(t);let i=[];n.nextLine();for(;r=n.nextLine();){let t=r.split("\t"),n={Assembly:t[1],ExperimentID:t[0],Experiment:t[0].substr(13).replace("/",""),Biosample:t[2],"Assay Type":t[3],Target:t[4],Format:t[8],"Output Type":t[7],Lab:t[9],url:"https://www.encodeproject.org"+t[10],"Bio Rep":t[5],"Tech Rep":t[6],Accession:t[11]};n.name=bs(n),(void 0===e||e(n))&&i.push(n)}return i}(await e.text(),this.filter);return n.sort(ws),n}static supportsGenome(t){const e=new Set(["ce10","ce11","dm3","dm6","GRCh38","hg19","mm9","mm10"]),n=ks(t);return e.has(n)}}function bs(t){let e=t["Cell Type"]||"";return t.Target&&(e+=" "+t.Target),"chip-seq"!==t["Assay Type"].toLowerCase()&&(e+=" "+t["Assay Type"]),t["Bio Rep"]&&(e+=" "+t["Bio Rep"]),t["Tech Rep"]&&(e+=(t["Bio Rep"]?":":" 0:")+t["Tech Rep"]),e+=" "+t["Output Type"],e+=" "+t.Accession,e}function ws(t,e){var n,r,i,o,a,s;return n=t["Assay Type"],r=e["Assay Type"],i=t.Biosample,o=e.Biosample,a=t.Target,s=e.Target,n===r?i===o?a===s?0:a<s?-1:1:i<o?-1:1:n<r?-1:1}function ks(t){switch(t){case"hg38":return"GRCh38";case"CRCh37":return"hg19";case"GRCm38":return"mm10";case"NCBI37":return"mm9";case"WBcel235":return"ce11";case"WS220":return"ce10";default:return t}}class xs{constructor(t){this.datasource=t.datasource,this.selectHandler=t.selectHandler,this.pageLength=t.pageLength||10,t.selectionStyle?this.select={style:t.selectionStyle}:this.select=!0;const e=t.id,n=t.title||"",r=t.parent?$(t.parent):$("body"),i=$(`\n        <div id="${e}" class="modal fade">\n        \n            <div class="modal-dialog modal-xl">\n        \n                <div class="modal-content">\n        \n                    <div class="modal-header">\n                        <div class="modal-title">${n}</div>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n        \n                    <div class="modal-body">\n        \n                        <div id="${e}-spinner" class="spinner-border" style="display: none;">\n                            \x3c!-- spinner --\x3e\n                        </div>\n        \n                        <div id="${e}-datatable-container">\n        \n                        </div>\n                    </div>\n        \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                    </div>\n        \n                </div>\n        \n            </div>\n        \n        </div>\n    `);r.append(i),this.$modal=i,this.$datatableContainer=i.find(`#${e}-datatable-container`),this.$spinner=i.find(`#${e}-spinner`);const o=i.find(".modal-footer button:nth-child(2)");i.on("shown.bs.modal",t=>{this.buildTable()}),i.on("hidden.bs.modal",t=>{$(t.relatedTarget).find("tr.selected").removeClass("selected")}),o.on("click",t=>{const e=this.getSelectedTableRowsData.call(this,this.$dataTable.$("tr.selected"));e&&this.selectHandler&&this.selectHandler(e)})}remove(){this.$modal.remove()}setDatasource(t){this.datasource=t,this.$datatableContainer.empty(),this.$table=void 0}async buildTable(){if(!this.$table&&this.datasource){this.$table=$('<table cellpadding="0" cellspacing="0" border="0" class="display"></table>'),this.$datatableContainer.append(this.$table);try{this.startSpinner();const t=this.datasource,e=await t.tableData(),n={data:e,columns:(await t.tableColumns()).map(t=>({title:t,data:t})),pageLength:this.pageLength,select:this.select,autoWidth:!1,paging:!0,scrollX:!0,scrollY:"400px",scroller:!0,scrollCollapse:!0};Reflect.has(t,"columnDefs")&&(n.columnDefs=t.columnDefs),this.tableData=e,this.$dataTable=this.$table.dataTable(n),this.$table.api().columns.adjust().draw()}catch(t){}finally{this.stopSpinner()}}}getSelectedTableRowsData(t){const e=this.tableData,n=[];if(t.length>0){t.removeClass("selected");const r=this.$table.api();t.each((function(){const t=r.row(this).index();n.push(e[t])}))}return n}startSpinner(){this.$spinner&&this.$spinner.show()}stopSpinner(){this.$spinner&&this.$spinner.hide()}}var Ss=function(){function t(e){var n,r=e.browser,o=e.trackRegistryFile,a=e.$urlModal,s=e.encodeModalTable,u=e.$dropdownMenu,c=e.$genericTrackSelectModal,l=e.uberFileLoader;i(this,t),this.browser=r,this.trackRegistryFile=o,this.trackRegistry=void 0,this.encodeModalTable=s,this.$dropdownMenu=u,this.$modal=c,n={$widgetParent:a.find(".modal-body"),mode:"url"},this.urlWidget=new Mo(n,new qo),Io(this.urlWidget,a,(function(t){return l.ingestPaths(t.getPaths()),!0})),this.updateTrackMenus(r.genome.id)}var e;return a(t,[{key:"getTrackRegistry",value:(e=r(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.trackRegistry){t.next=4;break}return t.abrupt("return",this.trackRegistry);case 4:if(!this.trackRegistryFile){t.next=24;break}return e=void 0,t.prev=6,t.next=9,fetch(this.trackRegistryFile);case 9:e=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),console.error(t.t0);case 15:if(!e){t.next=21;break}return t.next=18,e.json();case 18:return t.abrupt("return",t.sent);case 21:return t.abrupt("return",void 0);case 22:t.next=25;break;case 24:return t.abrupt("return",void 0);case 25:case"end":return t.stop()}}),t,this,[[6,12]])}))),function(){return e.apply(this,arguments)})},{key:"createEncodeTable",value:function(t){var e=new ys(t);this.encodeModalTable.setDatasource(e)}},{key:"updateTrackMenus",value:function(t){var e,n=this;(e=r(regeneratorRuntime.mark((function t(e){var r,i,o,a,s,u,c,l,f,h,d,p,v,m,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="genome_specific_",i=n.$dropdownMenu.find("#igv-app-annotations-section"),o="[id^="+r+"]",n.$dropdownMenu.find(o).remove(),n.trackRegistry=void 0,t.prev=6,t.next=9,n.getTrackRegistry();case 9:n.trackRegistry=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),kl.presentAlert(t.t0.message);case 15:if(void 0!==n.trackRegistry){t.next=19;break}throw a=new Error("Error retrieving registry via getTrackRegistry function"),kl.presentAlert(a.message),a;case 19:if(void 0!==(s=n.trackRegistry[e])){t.next=23;break}return console.warn("There are no tracks in the track registryy for genome ".concat(e)),t.abrupt("return");case 23:return u=[],t.prev=24,t.next=27,Promise.all(s.map((function(t){return fetch(t)})));case 27:u=t.sent,t.next=33;break;case 30:t.prev=30,t.t1=t.catch(24),kl.presentAlert(t.t1.message);case 33:return c=[],t.prev=34,t.next=37,Promise.all(u.map((function(t){return t.json()})));case 37:c=t.sent,t.next=43;break;case 40:t.prev=40,t.t2=t.catch(34),kl.presentAlert(t.t2.message);case 43:l=[],f=g(c),t.prev=45,f.s();case 47:if((h=f.n()).done){t.next=71;break}if("ENCODE"!==(d=h.value).type){t.next=54;break}n.createEncodeTable(d.genomeID),l.push(d),t.next=69;break;case 54:if("GTEX"!==d.type){t.next=68;break}return p=void 0,t.prev=56,t.next=59,igv.GtexUtils.getTissueInfo(d.datasetId);case 59:p=t.sent,t.next=65;break;case 62:t.prev=62,t.t3=t.catch(56),kl.presentAlert(t.t3.message);case 65:p&&(d.tracks=p.tissueInfo.map((function(t){return igv.GtexUtils.trackConfiguration(t)})),l.push(d)),t.next=69;break;case 68:l.push(d);case 69:t.next=47;break;case 71:t.next=76;break;case 73:t.prev=73,t.t4=t.catch(45),f.e(t.t4);case 76:return t.prev=76,f.f(),t.finish(76);case 79:l=l.reverse(),v=g(l);try{for(y=function(){var t=m.value,e=$("<button>",{class:"dropdown-item",type:"button"}),o=t.label+" ...";e.text(o);var a=r+t.label.toLowerCase().split(" ").join("_");e.attr("id",a),e.insertAfter(i),e.on("click",(function(){if("ENCODE"===t.type)n.encodeModalTable.$modal.modal("show");else{var e="<div>"+t.label+"</div>";t.description&&(e+="<div>"+t.description+"</div>"),n.$modal.find("#igv-app-generic-track-select-modal-label").html(e),Es(n.browser,n.$modal,t.tracks),n.$modal.modal("show")}}))},v.s();!(m=v.n()).done;)y()}catch(t){v.e(t)}finally{v.f()}case 82:case"end":return t.stop()}}),t,null,[[6,12],[24,30],[34,40],[45,73,76,79],[56,62]])}))),function(t){return e.apply(this,arguments)})(t)}}]),t}();function Es(t,e,n){var r,i;e.find("select").remove(),r=$("<select>",{class:"form-control"}),e.find(".form-group").append(r),i=$("<option>",{text:"Select..."}),r.append(i),i.attr("selected","selected"),i.val(void 0),n.reduce((function(t,e){return i=$("<option>",{value:e.name,text:e.name}),r.append(i),i.data("track",e),t.append(i),t}),r),r.on("change",(function(){var n=r.find("option:selected");if(""===n.val());else{n.removeAttr("selected");var i=n.data("track");t.loadTrack(i)}e.modal("hide")}))}var Ls=Math.min,Os=[].lastIndexOf,Rs=!!Os&&1/[1].lastIndexOf(1,-0)<0,_s=qt("lastIndexOf"),$s=ur("indexOf",{ACCESSORS:!0,1:0}),Ts=Rs||!_s||!$s?function(t){if(Rs)return Os.apply(this,arguments)||0;var e=T(this),n=xt(e.length),r=n-1;for(arguments.length>1&&(r=Ls(r,wt(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:Os;Vt({target:"Array",proto:!0,forced:Ts!==[].lastIndexOf},{lastIndexOf:Ts});var Cs=RegExp.prototype,As=Cs.toString,Ps=y((function(){return"/a/b"!=As.call({source:"a",flags:"b"})})),Is="toString"!=As.name;function Ds(t){this.mode=Ms.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,n=this.data.length;e<n;e++){var r=[],i=this.data.charCodeAt(e);i>65536?(r[0]=240|(1835008&i)>>>18,r[1]=128|(258048&i)>>>12,r[2]=128|(4032&i)>>>6,r[3]=128|63&i):i>2048?(r[0]=224|(61440&i)>>>12,r[1]=128|(4032&i)>>>6,r[2]=128|63&i):i>128?(r[0]=192|(1984&i)>>>6,r[1]=128|63&i):r[0]=i,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function js(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}(Ps||Is)&&pt(RegExp.prototype,"toString",(function(){var t=N(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in Cs)?Tr.call(t):n)}),{unsafe:!0}),Ds.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},js.prototype={addData:function(t){var e=new Ds(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=js.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(this.modules[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=Ws.getLostPoint(this);(0==n||t>r)&&(t=r,e=n)}return e},createMovieClip:function(t,e,n){var r=t.createEmptyMovieClip(e,n);this.make();for(var i=0;i<this.modules.length;i++)for(var o=1*i,a=0;a<this.modules[i].length;a++){var s=1*a;this.modules[i][a]&&(r.beginFill(0,100),r.moveTo(s,o),r.lineTo(s+1,o),r.lineTo(s+1,o+1),r.lineTo(s,o+1),r.endFill())}return r},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=Ws.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],i=t[n];if(null==this.modules[r][i])for(var o=-2;o<=2;o++)for(var a=-2;a<=2;a++)this.modules[r+o][i+a]=-2==o||2==o||-2==a||2==a||0==o&&0==a}},setupTypeNumber:function(t){for(var e=Ws.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++){r=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=Ws.getBCHTypeInfo(n),i=0;i<15;i++){var o=!t&&1==(r>>i&1);i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(i=0;i<15;i++){o=!t&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,r=this.moduleCount-1,i=7,o=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;s<2;s++)if(null==this.modules[r][a-s]){var u=!1;o<t.length&&(u=1==(t[o]>>>i&1)),Ws.getMask(e,r,a-s)&&(u=!u),this.modules[r][a-s]=u,-1==--i&&(o++,i=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}}},js.PAD0=236,js.PAD1=17,js.createData=function(t,e,n){for(var r=Ys.getRSBlocks(t,e),i=new Qs,o=0;o<n.length;o++){var a=n[o];i.put(a.mode,4),i.put(a.getLength(),Ws.getLengthInBits(a.mode,t)),a.write(i)}var s=0;for(o=0;o<r.length;o++)s+=r[o].dataCount;if(i.getLengthInBits()>8*s)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*s+")");for(i.getLengthInBits()+4<=8*s&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*s||(i.put(js.PAD0,8),i.getLengthInBits()>=8*s));)i.put(js.PAD1,8);return js.createBytes(i,r)},js.createBytes=function(t,e){for(var n=0,r=0,i=0,o=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s++){var u=e[s].dataCount,c=e[s].totalCount-u;r=Math.max(r,u),i=Math.max(i,c),o[s]=new Array(u);for(var l=0;l<o[s].length;l++)o[s][l]=255&t.buffer[l+n];n+=u;var f=Ws.getErrorCorrectPolynomial(c),h=new Xs(o[s],f.getLength()-1).mod(f);a[s]=new Array(f.getLength()-1);for(l=0;l<a[s].length;l++){var d=l+h.getLength()-a[s].length;a[s][l]=d>=0?h.get(d):0}}var p=0;for(l=0;l<e.length;l++)p+=e[l].totalCount;var g=new Array(p),v=0;for(l=0;l<r;l++)for(s=0;s<e.length;s++)l<o[s].length&&(g[v++]=o[s][l]);for(l=0;l<i;l++)for(s=0;s<e.length;s++)l<a[s].length&&(g[v++]=a[s][l]);return g};for(var Ms={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Bs={L:1,M:0,Q:3,H:2},Fs=0,Us=1,Ns=2,Hs=3,Gs=4,Vs=5,qs=6,Ks=7,Ws={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;Ws.getBCHDigit(e)-Ws.getBCHDigit(Ws.G15)>=0;)e^=Ws.G15<<Ws.getBCHDigit(e)-Ws.getBCHDigit(Ws.G15);return(t<<10|e)^Ws.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;Ws.getBCHDigit(e)-Ws.getBCHDigit(Ws.G18)>=0;)e^=Ws.G18<<Ws.getBCHDigit(e)-Ws.getBCHDigit(Ws.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return Ws.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case Fs:return(e+n)%2==0;case Us:return e%2==0;case Ns:return n%3==0;case Hs:return(e+n)%3==0;case Gs:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case Vs:return e*n%2+e*n%3==0;case qs:return(e*n%2+e*n%3)%2==0;case Ks:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new Xs([1],0),n=0;n<t;n++)e=e.multiply(new Xs([1,zs.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case Ms.MODE_NUMBER:return 10;case Ms.MODE_ALPHA_NUM:return 9;case Ms.MODE_8BIT_BYTE:case Ms.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case Ms.MODE_NUMBER:return 12;case Ms.MODE_ALPHA_NUM:return 11;case Ms.MODE_8BIT_BYTE:return 16;case Ms.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case Ms.MODE_NUMBER:return 14;case Ms.MODE_ALPHA_NUM:return 13;case Ms.MODE_8BIT_BYTE:return 16;case Ms.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var o=0,a=t.isDark(r,i),s=-1;s<=1;s++)if(!(r+s<0||e<=r+s))for(var u=-1;u<=1;u++)i+u<0||e<=i+u||0==s&&0==u||a==t.isDark(r+s,i+u)&&o++;o>5&&(n+=3+o-5)}for(r=0;r<e-1;r++)for(i=0;i<e-1;i++){var c=0;t.isDark(r,i)&&c++,t.isDark(r+1,i)&&c++,t.isDark(r,i+1)&&c++,t.isDark(r+1,i+1)&&c++,0!=c&&4!=c||(n+=3)}for(r=0;r<e;r++)for(i=0;i<e-6;i++)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(i=0;i<e;i++)for(r=0;r<e-6;r++)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);var l=0;for(i=0;i<e;i++)for(r=0;r<e;r++)t.isDark(r,i)&&l++;return n+=10*(Math.abs(100*l/e/e-50)/5)}},zs={glog:function(t){if(t<1)throw new Error("glog("+t+")");return zs.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return zs.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},Js=0;Js<8;Js++)zs.EXP_TABLE[Js]=1<<Js;for(Js=8;Js<256;Js++)zs.EXP_TABLE[Js]=zs.EXP_TABLE[Js-4]^zs.EXP_TABLE[Js-5]^zs.EXP_TABLE[Js-6]^zs.EXP_TABLE[Js-8];for(Js=0;Js<255;Js++)zs.LOG_TABLE[zs.EXP_TABLE[Js]]=Js;function Xs(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}function Ys(t,e){this.totalCount=t,this.dataCount=e}function Qs(){this.buffer=[],this.length=0}Xs.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=zs.gexp(zs.glog(this.get(n))+zs.glog(t.get(r)));return new Xs(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=zs.glog(this.get(0))-zs.glog(t.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(r=0;r<t.getLength();r++)n[r]^=zs.gexp(zs.glog(t.get(r))+e);return new Xs(n,0).mod(t)}},Ys.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],Ys.getRSBlocks=function(t,e){var n=Ys.getRsBlockTable(t,e);if(null==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,i=[],o=0;o<r;o++)for(var a=n[3*o+0],s=n[3*o+1],u=n[3*o+2],c=0;c<a;c++)i.push(new Ys(s,u));return i},Ys.getRsBlockTable=function(t,e){switch(e){case Bs.L:return Ys.RS_BLOCK_TABLE[4*(t-1)+0];case Bs.M:return Ys.RS_BLOCK_TABLE[4*(t-1)+1];case Bs.Q:return Ys.RS_BLOCK_TABLE[4*(t-1)+2];case Bs.H:return Ys.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},Qs.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Zs,tu=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function eu(t,e){for(var n=1,r=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),i=0,o=tu.length;i<=o;i++){var a=0;switch(e){case Bs.L:a=tu[i][0];break;case Bs.M:a=tu[i][1];break;case Bs.Q:a=tu[i][2];break;case Bs.H:a=tu[i][3]}if(r<=a)break;n++}if(n>tu.length)throw new Error("Too long data");return n}"svg"===document.documentElement.tagName.toLowerCase()?((Zs=function(t,e){this._el=t,this._htOption=e}).prototype.draw=function(t){var e=this._htOption,n=this._el,r=t.getModuleCount();Math.floor(e.width/r),Math.floor(e.height/r);function i(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);for(var r in e)e.hasOwnProperty(r)&&n.setAttribute(r,e[r]);return n}this.clear();var o=i("svg",{viewBox:"0 0 "+String(r)+" "+String(r),width:"100%",height:"100%",fill:e.colorLight});o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.appendChild(o),o.appendChild(i("rect",{fill:e.colorLight,width:"100%",height:"100%"})),o.appendChild(i("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;a<r;a++)for(var s=0;s<r;s++)if(t.isDark(a,s)){var u=i("use",{x:String(s),y:String(a)});u.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),o.appendChild(u)}},Zs.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)}):((Zs=function(t,e){this._bIsPainted=!1,this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null}).prototype.draw=function(t){var e=this._elImage,n=this._oContext,r=this._htOption,i=t.getModuleCount(),o=r.width/i,a=r.height/i,s=Math.round(o),u=Math.round(a);e.style.display="none",this.clear();for(var c=0;c<i;c++)for(var l=0;l<i;l++){var f=t.isDark(c,l),h=l*o,d=c*a;n.strokeStyle=f?r.colorDark:r.colorLight,n.lineWidth=1,n.fillStyle=f?r.colorDark:r.colorLight,n.fillRect(h,d,o,a),n.strokeRect(Math.floor(h)+.5,Math.floor(d)+.5,s,u),n.strokeRect(Math.ceil(h)-.5,Math.ceil(d)-.5,s,u)}this._bIsPainted=!0},Zs.prototype.makeImage=function(){this._bIsPainted&&(this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none")},Zs.prototype.isPainted=function(){return this._bIsPainted},Zs.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},Zs.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t});var nu=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:Bs.H},"string"==typeof e&&(e={text:e}),e)for(var n in e)this._htOption[n]=e[n];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(Zs=svgDrawer),this._el=t,this._oQRCode=null,this._oDrawing=new Zs(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)};nu.prototype.makeCode=function(t){this._oQRCode=new js(eu(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},nu.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&this._oDrawing.makeImage()},nu.prototype.clear=function(){this._oDrawing.clear()},nu.CorrectLevel=Bs;var ru=function t(e,n,o){i(this,t);var a=o.embedTarget||function(){var t=window.location.href.slice(),e=t.indexOf("?");e>0&&(t=t.substring(0,e));return e=t.lastIndexOf("/"),t.substring(0,e)+"/embed.html"}();o.$modal.on("show.bs.modal",function(){var t=r(regeneratorRuntime.mark((function t(n){var r,i,s,u,c,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=window.location.href.slice(),(i=r.indexOf("?"))>0&&(r=r.substring(0,i)),s=$o.browser.compressedSession(),a&&(u=iu(e,a,s),o.$embed_container.find("textarea").val(u),o.$embed_container.find("textarea").get(0).select()),t.next=7,yi(r,s);case 7:c=t.sent,o.$share_input.val(c),o.$share_input.get(0).select(),o.$email_button.attr("href","mailto:?body="+c),o.$qrcode_image.empty(),l={width:128,height:128,correctLevel:nu.CorrectLevel.H},new nu(o.$qrcode_image.get(0),l).makeCode(c),o.$tweet_button_container&&(o.$tweet_button_container.empty(),f={text:""},window.twttr.widgets.createShareButton(c,o.$tweet_button_container.get(0),f));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),o.$modal.on("hidden.bs.modal",(function(t){o.$embed_container.hide(),o.$qrcode_image.hide()})),o.$copy_link_button.on("click",(function(t){o.$share_input.get(0).select(),document.execCommand("copy")&&o.$modal.modal("hide")})),void 0===a?o.$embed_button.hide():(o.$embed_container.find("button").on("click",(function(t){o.$embed_container.find("textarea").get(0).select(),document.execCommand("copy")&&o.$modal.modal("hide")})),o.$embed_button.on("click",(function(t){o.$qrcode_image.hide(),o.$embed_container.toggle()}))),o.$qrcode_button.on("click",(function(t){o.$embed_container.hide(),o.$qrcode_image.toggle()}))};function iu(t,e,n){return'<iframe src="'+(e+"?sessionURL=blob:"+n)+'" style="width:100%; height:'+(t.height()+50)+'px"  allowfullscreen></iframe>'}var ou=te("iterator"),au=!y((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[ou]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),su=Object.assign,uu=Object.defineProperty,cu=!su||y((function(){if(b&&1!==su({b:1},su(uu({},"a",{enumerable:!0,get:function(){uu(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=su({},t)[n]||"abcdefghijklmnopqrst"!=Si(su({},e)).join("")}))?function(t,e){for(var n=Sr(t),r=arguments.length,i=1,o=Pt.f,a=x.f;r>i;)for(var s,u=R(arguments[i++]),c=o?Si(u).concat(o(u)):Si(u),l=c.length,f=0;l>f;)s=c[f++],b&&!a.call(u,s)||(n[s]=u[s]);return n}:su,lu=/[^\0-\u007E]/,fu=/[.\u3002\uFF0E\uFF61]/g,hu="Overflow: input needs wider integers to process",du=Math.floor,pu=String.fromCharCode,gu=function(t){return t+22+75*(t<26)},vu=function(t,e,n){var r=0;for(t=n?du(t/700):t>>1,t+=du(t/e);t>455;r+=36)t=du(t/35);return du(r+36*t/(t+38))},mu=function(t){var e,n,r=[],i=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}(t)).length,o=128,a=0,s=72;for(e=0;e<t.length;e++)(n=t[e])<128&&r.push(pu(n));var u=r.length,c=u;for(u&&r.push("-");c<i;){var l=2147483647;for(e=0;e<t.length;e++)(n=t[e])>=o&&n<l&&(l=n);var f=c+1;if(l-o>du((2147483647-a)/f))throw RangeError(hu);for(a+=(l-o)*f,o=l,e=0;e<t.length;e++){if((n=t[e])<o&&++a>2147483647)throw RangeError(hu);if(n==o){for(var h=a,d=36;;d+=36){var p=d<=s?1:d>=s+26?26:d-s;if(h<p)break;var g=h-p,v=36-p;r.push(pu(gu(p+g%v))),h=du(g/v)}r.push(pu(gu(h))),s=vu(a,f,c==u),a=0,++c}}++a,++o}return r.join("")},yu=function(t){var e=xe(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return N(e.call(t))},bu=mt("fetch"),wu=mt("Headers"),ku=te("iterator"),xu=dt.set,Su=dt.getterFor("URLSearchParams"),Eu=dt.getterFor("URLSearchParamsIterator"),Lu=/\+/g,Ou=Array(4),Ru=function(t){return Ou[t-1]||(Ou[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},_u=function(t){try{return decodeURIComponent(t)}catch(e){return t}},$u=function(t){var e=t.replace(Lu," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(Ru(n--),_u);return e}},Tu=/[!'()~]|%20/g,Cu={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Au=function(t){return Cu[t]},Pu=function(t){return encodeURIComponent(t).replace(Tu,Au)},Iu=function(t,e){if(e)for(var n,r,i=e.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),t.push({key:$u(r.shift()),value:$u(r.join("="))}))},Du=function(t){this.entries.length=0,Iu(this.entries,t)},ju=function(t,e){if(t<e)throw TypeError("Not enough arguments")},Mu=zi((function(t,e){xu(this,{type:"URLSearchParamsIterator",iterator:yu(Su(t).entries),kind:e})}),"Iterator",(function(){var t=Eu(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),Bu=function(){ge(this,Bu,"URLSearchParams");var t,e,n,r,i,o,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,f=[];if(xu(l,{type:"URLSearchParams",entries:f,updateURL:function(){},updateSearchParams:Du}),void 0!==c)if(C(c))if("function"==typeof(t=xe(c)))for(n=(e=t.call(c)).next;!(r=n.call(e)).done;){if((a=(o=(i=yu(N(r.value))).next).call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");f.push({key:a.value+"",value:s.value+""})}else for(u in c)I(c,u)&&f.push({key:u,value:c[u]+""});else Iu(f,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},Fu=Bu.prototype;ue(Fu,{append:function(t,e){ju(arguments.length,2);var n=Su(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){ju(arguments.length,1);for(var e=Su(this),n=e.entries,r=t+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){ju(arguments.length,1);for(var e=Su(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){ju(arguments.length,1);for(var e=Su(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){ju(arguments.length,1);for(var e=Su(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){ju(arguments.length,1);for(var n,r=Su(this),i=r.entries,o=!1,a=t+"",s=e+"",u=0;u<i.length;u++)(n=i[u]).key===a&&(o?i.splice(u--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=Su(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){for(var e,n=Su(this).entries,r=we(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new Mu(this,"keys")},values:function(){return new Mu(this,"values")},entries:function(){return new Mu(this,"entries")}},{enumerable:!0}),pt(Fu,ku,Fu.entries),pt(Fu,"toString",(function(){for(var t,e=Su(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(Pu(t.key)+"="+Pu(t.value));return n.join("&")}),{enumerable:!0}),fe(Bu,"URLSearchParams"),Vt({global:!0,forced:!au},{URLSearchParams:Bu}),au||"function"!=typeof bu||"function"!=typeof wu||Vt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(e=arguments[1],C(e)&&(n=e.body,"URLSearchParams"===oe(n)&&((r=e.headers?new wu(e.headers):new wu).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=$i(e,{body:S(0,String(n)),headers:S(0,r)}))),i.push(e)),bu.apply(this,i)}});var Uu,Nu={URLSearchParams:Bu,getState:Su},Hu=Xr.codeAt,Gu=m.URL,Vu=Nu.URLSearchParams,qu=Nu.getState,Ku=dt.set,Wu=dt.getterFor("URL"),zu=Math.floor,Ju=Math.pow,Xu=/[A-Za-z]/,Yu=/[\d+\-.A-Za-z]/,Qu=/\d/,Zu=/^(0x|0X)/,tc=/^[0-7]+$/,ec=/^\d+$/,nc=/^[\dA-Fa-f]+$/,rc=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ic=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,oc=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ac=/[\u0009\u000A\u000D]/g,sc=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(n=cc(e.slice(1,-1))))return"Invalid host";t.host=n}else if(mc(t)){if(e=function(t){var e,n,r=[],i=t.toLowerCase().replace(fu,".").split(".");for(e=0;e<i.length;e++)n=i[e],r.push(lu.test(n)?"xn--"+mu(n):n);return r.join(".")}(e),rc.test(e))return"Invalid host";if(null===(n=uc(e)))return"Invalid host";t.host=n}else{if(ic.test(e))return"Invalid host";for(n="",r=ra(e),i=0;i<r.length;i++)n+=gc(r[i],fc);t.host=n}},uc=function(t){var e,n,r,i,o,a,s,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(e=u.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(i=u[r]))return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=Zu.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?ec:8==o?tc:nc).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=Ju(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*Ju(256,3-r);return s},cc=function(t){var e,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,f=0,h=function(){return t.charAt(f)};if(":"==h()){if(":"!=t.charAt(1))return;f+=2,l=++c}for(;h();){if(8==c)return;if(":"!=h()){for(e=n=0;n<4&&nc.test(h());)e=16*e+parseInt(h(),16),f++,n++;if("."==h()){if(0==n)return;if(f-=n,c>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;f++}if(!Qu.test(h()))return;for(;Qu.test(h());){if(o=parseInt(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;f++}u[c]=256*u[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==h()){if(f++,!h())return}else if(h())return;u[c++]=e}else{if(null!==l)return;f++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s;else if(8!=c)return;return u},lc=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=zu(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},fc={},hc=cu({},fc,{" ":1,'"':1,"<":1,">":1,"`":1}),dc=cu({},hc,{"#":1,"?":1,"{":1,"}":1}),pc=cu({},dc,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),gc=function(t,e){var n=Hu(t,0);return n>32&&n<127&&!I(e,t)?t:encodeURIComponent(t)},vc={ftp:21,file:null,http:80,https:443,ws:80,wss:443},mc=function(t){return I(vc,t.scheme)},yc=function(t){return""!=t.username||""!=t.password},bc=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},wc=function(t,e){var n;return 2==t.length&&Xu.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},kc=function(t){var e;return t.length>1&&wc(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},xc=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&wc(e[0],!0)||e.pop()},Sc=function(t){return"."===t||"%2e"===t.toLowerCase()},Ec={},Lc={},Oc={},Rc={},_c={},$c={},Tc={},Cc={},Ac={},Pc={},Ic={},Dc={},jc={},Mc={},Bc={},Fc={},Uc={},Nc={},Hc={},Gc={},Vc={},qc=function(t,e,n,r){var i,o,a,s,u,c=n||Ec,l=0,f="",h=!1,d=!1,p=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(oc,"")),e=e.replace(ac,""),i=ra(e);l<=i.length;){switch(o=i[l],c){case Ec:if(!o||!Xu.test(o)){if(n)return"Invalid scheme";c=Oc;continue}f+=o.toLowerCase(),c=Lc;break;case Lc:if(o&&(Yu.test(o)||"+"==o||"-"==o||"."==o))f+=o.toLowerCase();else{if(":"!=o){if(n)return"Invalid scheme";f="",c=Oc,l=0;continue}if(n&&(mc(t)!=I(vc,f)||"file"==f&&(yc(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=f,n)return void(mc(t)&&vc[t.scheme]==t.port&&(t.port=null));f="","file"==t.scheme?c=Mc:mc(t)&&r&&r.scheme==t.scheme?c=Rc:mc(t)?c=Cc:"/"==i[l+1]?(c=_c,l++):(t.cannotBeABaseURL=!0,t.path.push(""),c=Hc)}break;case Oc:if(!r||r.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==o){t.scheme=r.scheme,t.path=r.path.slice(),t.query=r.query,t.fragment="",t.cannotBeABaseURL=!0,c=Vc;break}c="file"==r.scheme?Mc:$c;continue;case Rc:if("/"!=o||"/"!=i[l+1]){c=$c;continue}c=Ac,l++;break;case _c:if("/"==o){c=Pc;break}c=Nc;continue;case $c:if(t.scheme=r.scheme,o==Uu)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query;else if("/"==o||"\\"==o&&mc(t))c=Tc;else if("?"==o)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query="",c=Gc;else{if("#"!=o){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.path.pop(),c=Nc;continue}t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query,t.fragment="",c=Vc}break;case Tc:if(!mc(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,c=Nc;continue}c=Pc}else c=Ac;break;case Cc:if(c=Ac,"/"!=o||"/"!=f.charAt(l+1))continue;l++;break;case Ac:if("/"!=o&&"\\"!=o){c=Pc;continue}break;case Pc:if("@"==o){h&&(f="%40"+f),h=!0,a=ra(f);for(var g=0;g<a.length;g++){var v=a[g];if(":"!=v||p){var m=gc(v,pc);p?t.password+=m:t.username+=m}else p=!0}f=""}else if(o==Uu||"/"==o||"?"==o||"#"==o||"\\"==o&&mc(t)){if(h&&""==f)return"Invalid authority";l-=ra(f).length+1,f="",c=Ic}else f+=o;break;case Ic:case Dc:if(n&&"file"==t.scheme){c=Fc;continue}if(":"!=o||d){if(o==Uu||"/"==o||"?"==o||"#"==o||"\\"==o&&mc(t)){if(mc(t)&&""==f)return"Invalid host";if(n&&""==f&&(yc(t)||null!==t.port))return;if(s=sc(t,f))return s;if(f="",c=Uc,n)return;continue}"["==o?d=!0:"]"==o&&(d=!1),f+=o}else{if(""==f)return"Invalid host";if(s=sc(t,f))return s;if(f="",c=jc,n==Dc)return}break;case jc:if(!Qu.test(o)){if(o==Uu||"/"==o||"?"==o||"#"==o||"\\"==o&&mc(t)||n){if(""!=f){var y=parseInt(f,10);if(y>65535)return"Invalid port";t.port=mc(t)&&y===vc[t.scheme]?null:y,f=""}if(n)return;c=Uc;continue}return"Invalid port"}f+=o;break;case Mc:if(t.scheme="file","/"==o||"\\"==o)c=Bc;else{if(!r||"file"!=r.scheme){c=Nc;continue}if(o==Uu)t.host=r.host,t.path=r.path.slice(),t.query=r.query;else if("?"==o)t.host=r.host,t.path=r.path.slice(),t.query="",c=Gc;else{if("#"!=o){kc(i.slice(l).join(""))||(t.host=r.host,t.path=r.path.slice(),xc(t)),c=Nc;continue}t.host=r.host,t.path=r.path.slice(),t.query=r.query,t.fragment="",c=Vc}}break;case Bc:if("/"==o||"\\"==o){c=Fc;break}r&&"file"==r.scheme&&!kc(i.slice(l).join(""))&&(wc(r.path[0],!0)?t.path.push(r.path[0]):t.host=r.host),c=Nc;continue;case Fc:if(o==Uu||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&wc(f))c=Nc;else if(""==f){if(t.host="",n)return;c=Uc}else{if(s=sc(t,f))return s;if("localhost"==t.host&&(t.host=""),n)return;f="",c=Uc}continue}f+=o;break;case Uc:if(mc(t)){if(c=Nc,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=Uu&&(c=Nc,"/"!=o))continue}else t.fragment="",c=Vc;else t.query="",c=Gc;break;case Nc:if(o==Uu||"/"==o||"\\"==o&&mc(t)||!n&&("?"==o||"#"==o)){if(".."===(u=(u=f).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(xc(t),"/"==o||"\\"==o&&mc(t)||t.path.push("")):Sc(f)?"/"==o||"\\"==o&&mc(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&wc(f)&&(t.host&&(t.host=""),f=f.charAt(0)+":"),t.path.push(f)),f="","file"==t.scheme&&(o==Uu||"?"==o||"#"==o))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==o?(t.query="",c=Gc):"#"==o&&(t.fragment="",c=Vc)}else f+=gc(o,dc);break;case Hc:"?"==o?(t.query="",c=Gc):"#"==o?(t.fragment="",c=Vc):o!=Uu&&(t.path[0]+=gc(o,fc));break;case Gc:n||"#"!=o?o!=Uu&&("'"==o&&mc(t)?t.query+="%27":t.query+="#"==o?"%23":gc(o,fc)):(t.fragment="",c=Vc);break;case Vc:o!=Uu&&(t.fragment+=gc(o,hc))}l++}},Kc=function(t){var e,n,r=ge(this,Kc,"URL"),i=arguments.length>1?arguments[1]:void 0,o=String(t),a=Ku(r,{type:"URL"});if(void 0!==i)if(i instanceof Kc)e=Wu(i);else if(n=qc(e={},String(i)))throw TypeError(n);if(n=qc(a,o,null,e))throw TypeError(n);var s=a.searchParams=new Vu,u=qu(s);u.updateSearchParams(a.query),u.updateURL=function(){a.query=String(s)||null},b||(r.href=zc.call(r),r.origin=Jc.call(r),r.protocol=Xc.call(r),r.username=Yc.call(r),r.password=Qc.call(r),r.host=Zc.call(r),r.hostname=tl.call(r),r.port=el.call(r),r.pathname=nl.call(r),r.search=rl.call(r),r.searchParams=il.call(r),r.hash=ol.call(r))},Wc=Kc.prototype,zc=function(){var t=Wu(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,u=t.fragment,c=e+":";return null!==i?(c+="//",yc(t)&&(c+=n+(r?":"+r:"")+"@"),c+=lc(i),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Jc=function(){var t=Wu(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&mc(t)?e+"://"+lc(t.host)+(null!==n?":"+n:""):"null"},Xc=function(){return Wu(this).scheme+":"},Yc=function(){return Wu(this).username},Qc=function(){return Wu(this).password},Zc=function(){var t=Wu(this),e=t.host,n=t.port;return null===e?"":null===n?lc(e):lc(e)+":"+n},tl=function(){var t=Wu(this).host;return null===t?"":lc(t)},el=function(){var t=Wu(this).port;return null===t?"":String(t)},nl=function(){var t=Wu(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},rl=function(){var t=Wu(this).query;return t?"?"+t:""},il=function(){return Wu(this).searchParams},ol=function(){var t=Wu(this).fragment;return t?"#"+t:""},al=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(b&&Ei(Wc,{href:al(zc,(function(t){var e=Wu(this),n=String(t),r=qc(e,n);if(r)throw TypeError(r);qu(e.searchParams).updateSearchParams(e.query)})),origin:al(Jc),protocol:al(Xc,(function(t){var e=Wu(this);qc(e,String(t)+":",Ec)})),username:al(Yc,(function(t){var e=Wu(this),n=ra(String(t));if(!bc(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=gc(n[r],pc)}})),password:al(Qc,(function(t){var e=Wu(this),n=ra(String(t));if(!bc(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=gc(n[r],pc)}})),host:al(Zc,(function(t){var e=Wu(this);e.cannotBeABaseURL||qc(e,String(t),Ic)})),hostname:al(tl,(function(t){var e=Wu(this);e.cannotBeABaseURL||qc(e,String(t),Dc)})),port:al(el,(function(t){var e=Wu(this);bc(e)||(""==(t=String(t))?e.port=null:qc(e,t,jc))})),pathname:al(nl,(function(t){var e=Wu(this);e.cannotBeABaseURL||(e.path=[],qc(e,t+"",Uc))})),search:al(rl,(function(t){var e=Wu(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",qc(e,t,Gc)),qu(e.searchParams).updateSearchParams(e.query)})),searchParams:al(il),hash:al(ol,(function(t){var e=Wu(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",qc(e,t,Vc)):e.fragment=null}))}),pt(Wc,"toJSON",(function(){return zc.call(this)}),{enumerable:!0}),pt(Wc,"toString",(function(){return zc.call(this)}),{enumerable:!0}),Gu){var sl=Gu.createObjectURL,ul=Gu.revokeObjectURL;sl&&pt(Kc,"createObjectURL",(function(t){return sl.apply(Gu,arguments)})),ul&&pt(Kc,"revokeObjectURL",(function(t){return ul.apply(Gu,arguments)}))}fe(Kc,"URL"),Vt({global:!0,forced:!au,sham:!b},{URL:Kc}),Vt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var cl=function t(e){var n=e.browser,r=e.$urlModal,o=e.$saveButton,a=e.$saveModal,s=e.uberFileLoader;i(this,t);var u={dataTitle:"Load Session",$widgetParent:r.find(".modal-body"),mode:"url",dataOnly:!0};this.urlWidget=new Mo(u,new qo),Io(this.urlWidget,r,(function(t){return s.ingestPaths(t.getPaths()),!0})),function(t,e){var n=e.find("input");e.on("show.bs.modal",(function(t){n.val("igv-app-session.json")})),e.on("hidden.bs.modal",(function(t){n.val("igv-app-session.json")}));var r=function(){var r=n.val(),i=new Set(["json","xml"]);void 0===r||""===r?r=n.attr("placeholder"):!1===i.has(Po(r))&&(r+=".json"),e.modal("hide");var o=t.toJSON(),a=JSON.stringify(o,null,"\t"),s=URL.createObjectURL(new Blob([a],{type:"application/octet-stream"}));igv.download(r,s)};e.find(".modal-footer button:nth-child(2)").on("click",r),n.on("keyup",(function(t){13===t.keyCode&&r()}));var i=e.find(".modal-header button:nth-child(1)");i.on("click",(function(){e.modal("hide")})),(i=e.find(".modal-footer button:nth-child(1)")).on("click",(function(){e.modal("hide")}))}(n,a),o.on("click",(function(t){a.modal()}))};var ll=function t(e){var n=e.browser,r=e.$saveModal;i(this,t),function(t,e){var n=e.find("input");e.on("show.bs.modal",(function(t){n.val("igv-app.svg")})),e.on("hidden.bs.modal",(function(t){n.val("igv-app.svg")}));var r=function(){var r=n.val(),i=new Set(["svg"]);void 0===r||""===r?r=n.attr("placeholder"):!1===i.has(Po(r))&&(r+=".svg"),e.modal("hide"),t.renderSVG({filename:r})};e.find(".modal-footer button:nth-child(2)").on("click",r),n.on("keyup",(function(t){13===t.keyCode&&r()}));var i=e.find(".modal-header button:nth-child(1)");i.on("click",(function(){e.modal("hide")})),(i=e.find(".modal-footer button:nth-child(1)")).on("click",(function(){e.modal("hide")}))}(n,r)};var fl,hl=".igv-webapp-drag",dl=function(t,e){$(e).on("mousedown"+hl,pl.bind(t))};function pl(t){t.stopPropagation();var e=Math.round(parseFloat(this.style.left.replace("px",""))),n=Math.round(parseFloat(this.style.top.replace("px",""))),r=gl.bind(this),i=vl.bind(this);fl={dragFunction:r,dragEndFunction:i,dx:e-t.screenX,dy:n-t.screenY},$(document).on("mousemove"+hl,r),$(document).on("mouseup"+hl,i),$(document).on("mouseleave"+hl,i),$(document).on("mouseexit"+hl,i)}function gl(t){if(fl){t.stopPropagation();var e=fl.dx+t.screenX,n=fl.dy+t.screenY;this.style.left=e+"px",this.style.top=n+"px"}}function vl(t){if(fl){t.stopPropagation();var e=fl.dx+t.screenX,n=fl.dy+t.screenY;this.style.left=e+"px",this.style.top=n+"px",$(document).off(hl),fl=void 0;$(this).attr("id")}}var ml,yl,bl,wl,kl,xl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,t);var e,n=(e=r,function(){var t,n=s(e);if(c()){var r=s(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function r(t){var e,o=t.$container,a=t.panel,s=t.isHidden;i(this,r);return(e=n.call(this,{$container:o,panel:a,isHidden:s,xFunction:function(t,e){return(t-e)/2},yFunction:function(t,e){return 64}})).messageContainer=e.$panel.find("#igv-webapp-alert-panel-content-container"),e}return a(r,[{key:"presentAlert",value:function(t){this.messageContainer.text(t),f(s(r.prototype),"presentPanel",this).call(this)}}]),r}(function(){function t(e){var n=this,r=e.$container,o=e.panel,a=e.isHidden,s=e.xFunction,u=e.yFunction;i(this,t),this.container=r.get(0),this.$panel=$(o);var c=this.$panel.find(".igv-webapp-panel-drag-container");dl(o,c.get(0));var l="resize.panel-".concat(igv.guid(),".igv-web-app");$(window).on(l,(function(){!1===n.isHidden&&n.layout(s,u)})),this.$panel.find("i.fa-times-circle").on("click.igv-webapp.panel-".concat(igv.guid()),(function(t){t.stopPropagation(),n.dismissPanel()})),this.xFunction=s,this.yFunction=u,!0===a?this.dismissPanel():this.presentPanel()}return a(t,[{key:"presentPanel",value:function(){this.layout(this.xFunction,this.yFunction),this.isHidden=!1}},{key:"dismissPanel",value:function(){this.moveOffScreen(),this.isHidden=!0}},{key:"layout",value:function(t,e){var n=this.container.getBoundingClientRect(),r=n.width,i=n.height,o=this.$panel.get(0).getBoundingClientRect(),a=o.width,s=o.height,u=t(r,a),c=e(i,s);this.$panel.offset({left:u,top:c})}},{key:"moveOffScreen",value:function(){this.$panel.offset({left:-1e3,top:-1e3})}}]),t}()),Sl=!1,El=function(t,e,n){kl=new xl({$container:{$container:e}.$container,panel:$("#igv-webapp-alertpanel").get(0),isHidden:!0}),Ll($("#igv-app-bookmark-button"));var i=$("#igv-app-multiple-file-load-modal"),o=$("#igv-app-dropdown-google-drive-track-file-button");Sl||o.parent().hide();var a=Sl?o:void 0;ml=new Ss(function(t){var e=t.browser,n=t.trackRegistryFile,i=t.$googleDriveButton,o={$modal:$("#igv-app-multiple-file-load-modal"),modalTitle:"Track File Error",$localFileInput:$("#igv-app-dropdown-local-track-file-input"),$dropboxButton:$("#igv-app-dropdown-dropbox-track-file-button"),$googleDriveButton:i,configurationHandler:wa.trackConfigurator,jsonFileValidator:wa.trackJSONValidator,pathValidator:wa.trackPathValidator,fileLoadHandler:function(t){e.loadTrackList(t)}},a={id:"igv-app-encode-modal",title:"ENCODE",selectionStyle:"multi",pageLength:100,selectHandler:function(t){var n;(n=r(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadTrackList(n);case 2:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})(t)}};return{browser:e,trackRegistryFile:n,$urlModal:$("#igv-app-track-from-url-modal"),encodeModalTable:new xs(a),$dropdownMenu:$("#igv-app-track-dropdown-menu"),$genericTrackSelectModal:$("#igv-app-generic-track-select-modal"),uberFileLoader:new wa(e,o)}}({browser:t,trackRegistryFile:n.trackRegistryFile,$googleDriveButton:a}));var s=$("#igv-app-dropdown-google-drive-genome-file-button");Sl||s.parent().hide();var u={$modal:i,modalTitle:"Genome File Error",$localFileInput:$("#igv-app-dropdown-local-genome-file-input"),$dropboxButton:$("#igv-app-dropdown-dropbox-genome-file-button"),$googleDriveButton:Sl?s:void 0,configurationHandler:wa.genomeConfigurator,jsonFileValidator:wa.genomeJSONValidator,pathValidator:wa.genomePathValidator,fileLoadHandler:function(t){var e=t[0];Do(e)}};yl=new wa(t,u);var c={$urlModal:$("#igv-app-genome-from-url-modal"),genomes:n.genomes,uberFileLoader:yl};wl=new Wo(t,c);var l=void 0;r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wl.getAppLaunchGenomes();case 3:l=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),kl.presentAlert(e.t0.message);case 9:l&&Jo({browser:t,genomeDictionary:l,$dropdown_menu:$("#igv-app-genome-dropdown-menu")});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))();var f=$("#igv-app-dropdown-google-drive-session-file-button");Sl||f.parent().hide();var h={$modal:i,modalTitle:"Session File Error",$localFileInput:$("#igv-app-dropdown-local-session-file-input"),multipleFileSelection:!1,$dropboxButton:$("#igv-app-dropdown-dropbox-session-file-button"),$googleDriveButton:Sl?f:void 0,configurationHandler:wa.sessionConfigurator,jsonFileValidator:wa.sessionJSONValidator};bl=new wa(t,h);var d={browser:t,$urlModal:$("#igv-app-session-from-url-modal"),$saveButton:$("#igv-app-save-session-button"),$saveModal:$("#igv-app-session-save-modal"),uberFileLoader:bl};new cl(d);var p={browser:t,$saveModal:$("#igv-app-svg-save-modal")};new ll(p);var g,v=$("#igv-app-tweet-button-container");n.urlShortener&&(g=void 0!==mi(n.urlShortener)),g||v.hide();var m={$modal:$("#igv-app-share-modal"),$share_input:$("#igv-app-share-input"),$copy_link_button:$("#igv-app-copy-link-button"),$tweet_button_container:g?v:void 0,$email_button:$("#igv-app-email-button"),$qrcode_button:$("#igv-app-qrcode-button"),$qrcode_image:$("#igv-app-qrcode-image"),$embed_container:$("#igv-app-embed-container"),$embed_button:$("#igv-app-embed-button"),embedTarget:n.embedTarget};new ru(e,t,m)},Ll=function(t){t.on("click",(function(t){var e;window.history.pushState({},"IGV",function(){var t,e;return((e=(t=window.location.href.slice()).indexOf("?"))>0?t.substring(0,e):t)+"?sessionURL=blob:"+igv.getBrowser().compressedSession()}()),e=/Mac/i.test(navigator.userAgent)?"Cmd":"Ctrl",alert("A bookmark URL has been created. Press "+e+"+D to save.")}))};$(document).ready((function(){!function(t,e){if(e.clientId&&"CLIENT_ID"!==e.clientId&&("https:"===window.location.protocol||"localhost"===window.location.host)){var n,i={callback:function(){r(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,er(e.clientId);case 2:return r.sent,r.next=5,igv.createBrowser(t.get(0),e.igvConfig);case 5:n=r.sent,$o.browser=n,Sl=!0,nr(),El(n,t,e);case 10:case"end":return r.stop()}}),r)})))()},onerror:function(r){console.error(r),El(n,t,e)}};gapi.load("client:auth2",i)}else r(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,igv.createBrowser(t.get(0),e.igvConfig);case 2:r=n.sent,$o.browser=r,El(r,t,e);case 5:case"end":return n.stop()}}),n)})))()}($("#igv-app-container"),igvwebConfig)}))}));
//# sourceMappingURL=app_bundle.min.js.map
